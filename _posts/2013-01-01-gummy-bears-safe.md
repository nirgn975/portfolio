---
title: כספת של סוכריות גומי
author: nirgn
layout: post
category: Android
---
[<img class="alignleft wp-image-957" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Jelly_Bean_Logo.png" alt="Jelly Bean Logo" width="200" height="289" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Jelly_Bean_Logo.png 222w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/Jelly_Bean_Logo-300x433.png 300w" sizes="(max-width: 200px) 100vw, 200px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/Jelly_Bean_Logo.png)אתמול פורסם מאמר נוסף שכתבתי בשביל מגזין <a href="http://www.digitalwhisper.co.il/" target="_blank">Digital Whisper</a>, להלן המאמר:

&nbsp;

## <span style="text-decoration: underline;"><strong>הקדמה</strong></span>

מאמר זה הינו מאמר המשך ל<a title="Android – מנגנוני אבטחה" href="http://www.lifelongstudent.net/2012/05/android-%d7%9e%d7%a0%d7%92%d7%a0%d7%95%d7%a0%d7%99-%d7%90%d7%91%d7%98%d7%97%d7%94/" target="_blank">Android &#8211; מנגנוני אבטחה</a> שפורסם בגיליון ה-31. במאמר הקודם נגענו בנושאים כגון החשיבות של אבטחת המידע ועל יסודות האבטחה בעולם האנדרואיד, על מרכז הגישה של המכשיר, על הסכנות ועל דרכים להתמודד איתם. מומלץ לקרוא את המאמר הקודם. למידה על הנושא היא חשובה ביותר, אך אם לא נשאר מעודכנים &#8211; פספסנו את הרעיון. במאמר זה אציג את העדכונים והחידושים שגרסאות Jelly Bean 4.1 ו-4.2 מביאות עמן בתחום האבטחה (כגון ASLR, סריקת רוגלות ב-Play ועוד), ובנוסף נגע במספר נקודות למחשבה על חורים הקיימים במערכת.<!--more-->

&nbsp;

## **<span style="text-decoration: underline;">בסיס הבעיה של אנדרואיד</span>**

לפני שנתחיל, הייתי רוצה לציין שעולם האנדרואיד מתקדם מהר, אפילו מהר מאוד. גוגל מתקנים כל חור אבטחה שמתגלה ומוסיפים שכבות אבטחה במהירות יוצאת מן הכלל, אך דבר אחד הם מפספסים והוא עדכוני אבטחה.

בעוד שהאפליקציות לאנדרואיד מתעדכנות ברקע, ואף נהוג לקבל היום עדכוני OTA הכוללים שיפורים מסיביים למדי, אנדרואיד עדיין נמצאת מאחור מאוד בתחום הזה. בסיס הטעות הוא שהמערכת ניתנת ליצרניות והן משנות אותה, ובהמשך לכך לא מוציאות את העדכונים במהירות הנדרשת (שלא נדבר על זה שהן רוב הפעמים לא מוציאות עדכונים כלל).

כדי להמחיש את הבעיה מצורפת בעמוד הבא טבלת החלוקה על פי גרסאות (נכון לדצמבר 2012).

[<img class="aligncenter wp-image-958" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Android_Version_Dec_Chart.png" alt="Android Version Dec Chart" width="800" height="424" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Android_Version_Dec_Chart.png 846w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/Android_Version_Dec_Chart-300x158.png 300w" sizes="(max-width: 800px) 100vw, 800px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/Android_Version_Dec_Chart.png)

גוגל הכריזה בכנס ההכרזה של מוטורולה (הכנס האחרון בו קיבלנו מידע רשמי, והתקיים לפני כ-4 חודשים, בספטמבר האחרון) על 480 מיליון מכשירים שאוקטבו עד היום, בכל העולם (נכון לספטמבר כמובן), בקצב (שהולך וגדל) של 1.3 מיליון מכשירים שמאוקטבים כל יום (תארו לעצמכם כמה מכשירי אנדרואיד יהיו שנה הבאה בקצב גידול שכזה).

עכשיו, בואו נחשוב שניה במספרים, כדי להבין את סדרי הגודל: גרסה 1.6: 1.44 מיליון מכשירים (0.3% מ-480 מיליון). גרסה 2.1: 12.96 מיליון מכשירים. גרסה :2.2 49.44 מיליון מכשירים. גרסאות2.3 עד 2.3.7: כמעט 244 מיליון מכשירים. ובקיצור קצת יותר מ-65% מאוכלוסיית האנדרואיד (שהם יותר מ-310 מיליון מכשירים ברחבי העולם), בעלי גרסאות ישנות.

מדובר על גרסאות שיצאו לפני ICS (שיצאה לפני שנה וחצי), ובעולם הסלולר "שנה וחצי" זה נצח! שלא לדבר על כך שלא מדובר על מערכת מוכנה ו-"בוגרת", אלא על מערכת שעדיין בבניה, ורוב הפיצ'רים שמתווספים לה הינם פיצ'רים הכרחיים וחשובים ולא מותרות אבטחה (לדוגמא זיהוי הפנים).

עדכוני אבטחה סדירים צריכים להיות בראש סדר העדיפויות של הצרכן כשהוא רוכש מכשיר חדש. מניעת העדכונים האלו על ידי היצרניות השונות (כשלרוב מדובר על טענות מוזרות וחסרות כל בסיס בגינן הן לא מעדכנת את המכשירים) הינה בעיה חמורה והצרכנים חייבים לגנותה.

&nbsp;

## **<span style="text-decoration: underline;">אוקיי, מה זה אומר לנו?</span>**

ישנה בעיה שלא בשליטת גוגל. גוגל מעדכנת ומתקנת פרצות אבטחה, אך העדכונים לא מגיעים לצרכן הסופי. זה אומר שפרצות אבטחה שמתגלות עדיין קיימות אצל אחוז נכבד מאוד מהאוכלוסייה (וסביר להניח שיהיו קיימות עוד הרבה זמן), וזה אומר שלא חייבים לנצל דווקא פרצות שעובדות על הגרסה האחרונה, שמותקנת רק אצל 6.7% (JB &#8211; 4.1+4.2) מאוכלוסיית האנדרואיד, גם אם נשתמש בפרצה ישנה שכבר תוקנה בגרסה החדשה, עדיין נוכל להשתמש בה על הרוב הגדול של האוכלוסייה.

&nbsp;

## **<span style="text-decoration: underline;">אז נעלת את המכשיר ו&#8230;?</span>**

נעילת המכשיר, רובנו מבצעים את זה, האם זה בטוח? לא ממש, הרי המערכת "מקליטה" את הצורה או את הסיסמה, היא צריכה להשוות עם משהו. איפה ההקלטה הזאת יושבת? בנתיבים הבאים: <span style="color: #ff0000;">data/system/gesture.key/</span> ו <span style="color: #ff0000;">data/system/password.key/<span style="color: #000000;">.</span></span>

למרות שהקובץ מוצפן, לא ניתן להיכנס אליו ופשוט למשוך את הצורה או הסיסמה. אבל מה שניתן לעשות הוא פשוט למחוק את הקובץ, במידה ואין עם מה להשוות, המערכת מקבלת כל סיסמה או צורה שתכניסו.

אז מה צריך בשביל זה:

  1. USB Debugging פועל, במידה והוא לא פועל ניתן להריץ את הפקודות דרך ה-Recovery (במידה ויש. במידה ואין, לא יהיה ניתן למחוק את הקובץ כשהמכשיר כבר נעול, למרות שלרוב ניתן "לדחוף" את הריקברי המפותח "בכוח", במצב של Fastboot).
  2. יש לציין כי לא חשוב אם קיימות הרשאות root או לא.

ולהלן הפקודה:

<pre class="lang:default decode:true">adb shell rm /data/system/gesture.key
או
adb shell rm /data/system/password.key</pre>

הפקודה רצה כמובן דרך ה Adb, לאלה שלא מוכר להם העניין חיפוש קצר בגוגל של הערך "Android Adb" יעזור מאוד.

מה אנחנו בעצם עושים בפקודה הזאת? rm זהו קיצור של remove. ובכך אנחנו מסירים את הקובץ gesture.key (או password.key) שנמצא בנתיב <span style="color: #ff0000;">data/system/</span> (לפעמים לאחר הרצת הפקודה יש לכבות-ולהדליק את המכשיר).

יש לציין כי הפרצה נבדקה ועובדת על גרסאות 2.1 &#8211; 2.2 &#8211; 2.3.3 &#8211; 4.0.3 &#8211; 4.1.2 &#8211; 4.2 המהווים קצת יותר מ-95% מסך המכשירים המאוקטבים היום (וניתן להניח כי הפרצה עובדת גם על גרסאות קודמות יותר). בנוסף, אציין כי הפרצה נוסתה על גרסת AOSP &#8211; גרסה נקייה של אנדרואיד, ואשמח לשמוע אם היא עובדת על המכשירים עם הממשקים השונים (Sense של HTC או Touchwiz של Samsung וכד').

&nbsp;

## <span style="text-decoration: underline;"><strong>גישה לכרטיס ה-SD ובעית המפתחים</strong></span>

לא אחת כבר כתבו על זה, כרטיס ה-SD מכיל עלינו כל כך הרבה מידע, אנחנו פשוט לא מתארים עד כמה. כרטיס ה-SD מהווה מין 'פח אשפה' של המכשיר, כל אפליקציה שאנו מתקינים יוצרת עליו תיקייה משלה ומאחסנת שם מידע (ולרוב גם לאחר הסרתה היא משאירה שם את המידע, ולא מוחקת אותו כמו שנהוג לחשוב), ולכרטיס ה-SD כל אחד יכול לגשת (כמובן, יש צורך בהרשאה לכך, אך כמעט כל אפליקציה מבקשת הרשאה לכתיבה וקריאה מכרטיס ה-SD ובלעדיה אין היא יכולה לפעול כראוי).

הבעיה היא שההרשאה ניתנת באופן מלא, או שיש גישה לכל התכנים ב-SD או שאין גישה בכלל (וכמו שאמרנו, האפליקציה לא תוכל לפעול כראוי). אז ברגע שיש לאפליקציה גישה ל-SD יש לה גישה לכל המידע עליו, אם זה תמונות, סרטונים, ושאר הדברים שנמצאים שם בצורה גלויה ולא מוצפנת, ניחא. הבעיה גדלה כשאפליקציות צד שלישי לא שומרת את המידע בצורה מוצפנת.

להלן כמה דוגמאות של המידע שאנו מאחסנים (בכוונה או ש"מאחסנים אותו בשבילנו"):

  1. כל אפליקציה שמותקנת אצלנו במכשיר יוצרת תיקייה בנתיב <span style="color: #ff0000;">Android/data/</span>, וכך ניתן לקבל רשימה של כל האפליקציות המותקנות אצלנו במכשיר.
  2. ניתן לראות / להעביר את כל הסרטונים, התמונות והשירים שיש אצלנו ב-SD.
  3. במידה וביצענו גיבוי של אנשי הקשר ב-SD, קובץ ה-VCF חשוף לגמרי וכולם יכולים לראות את אנשי הקשר שלנו (עם כל המידע שרשום אצלנו כמו קישור לפייסבוק, כתובות מייל וכד').
  4. גישה למידע של אפליקציות. דוגמאות:
      * <a href="https://play.google.com/store/apps/details?id=com.dropbox.android&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5kcm9wYm94LmFuZHJvaWQiXQ.." target="_blank">Dropbox</a> שם כל אחד יכול לראות את התמונות / קבצים / מסמכים שהורדתי / העליתי ל / מהמכשיר.
      * <a href="https://play.google.com/store/apps/details?id=com.riteshsahu.SMSBackupRestore&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5yaXRlc2hzYWh1LlNNU0JhY2t1cFJlc3RvcmUiXQ.." target="_blank">SMS Backup & Restore</a> שמגבה את כל ה-SMS-ים שלי, וכל אחד יכול לפתוח את הקובץ ב-Notepad ולקרוא את כל ה-SMS-ים שכתבתי אי פעם.
      * <a href="https://play.google.com/store/apps/details?id=com.waze&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS53YXplIl0." target="_blank">Waze</a> שומרת קובץ בשם waze_log בו קיים המידע של האפליקציה בעת ההתקנה כמו על איזה מכשיר היא הותקנה (דגם מדויק), איזה גרסת אנדרואיד (לפי API), מתי היא הותקנה, גרסת רום, איזה גרסה של האפליקציה, על איזה רשת התחברתי וכד'.

להלן תמונה של הקובץ מהמכשיר שלי, סימנתי את חלק מהדברים:

[<img class="aligncenter wp-image-962" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Waze_log.png" alt="Waze log" width="800" height="221" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Waze_log.png 1280w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/Waze_log-300x82.png 300w" sizes="(max-width: 800px) 100vw, 800px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/Waze_log.png)

  * <a href="https://play.google.com/store/apps/details?id=com.ideashower.readitlater.pro&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5pZGVhc2hvd2VyLnJlYWRpdGxhdGVyLnBybyJd" target="_blank">Readitlater</a> שומרת אתרים וכתבות כדי שנוכל לקרוא אותם אחר כך (ועל הדרך בצורה נוחה), איפה היא שומרת את הכתבות?, בנתיב <span style="color: #ff0000;">\Android\data\com.ideashower.readitlater.pro\files\RIL_offline\RIL_pages</span>. שם כל הכתבות, התמונות מהכתבות והאתרים עצמם חשופים לכל, דוגמה:

[<img class="aligncenter wp-image-963" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/ReadItLater.png" alt="ReadItLater" width="800" height="53" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/ReadItLater.png 1266w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/ReadItLater-300x19.png 300w" sizes="(max-width: 800px) 100vw, 800px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/ReadItLater.png)

  * <a href="https://play.google.com/store/apps/details?id=com.whatsapp&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS53aGF0c2FwcCJd" target="_blank">WhatsApp</a> כל המידע שהעברנו באפליקציה (תמונות, סרטונים, קבצי קול) פתוח לכל. ובנוסף הגיבויים יושבים על המכשיר עצמו, בנתיב: <span style="color: #ff0000;">WhatsApp\Databases\</span>, זאת אומרת שבקלות אפשר לקחת את קבצי הגיבוי.   
    כמובן, שגם ניתן לפתוח את קבצי הגיבוי, הנה הדרך הקלה ביותר (שאני מכיר): <a href="http://forum.xda-developers.com/showthread.php?t=1583021" target="_blank">כאן</a>.
  * <a href="https://play.google.com/store/apps/details?id=com.handmark.expressweather&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5oYW5kbWFyay5leHByZXNzd2VhdGhlciJd" target="_blank">1Weather</a> ששומרת בקובץ שכל אחד יכול לקרוא את המיקום שבו הייתי לפי תאריך, שעה, מזג האוויר באותו מיקום וכו'.

בכוונה צורפו קישורים לעמודי האפליקציות ב-Play, כנסו ותראו שלא מדובר על אפליקציות נידחות, אלא על כאלו פופולריות מאוד עם מיליוני (ולפעמים עשרות מיליוני) הורדות. ואלה דוגמאות פשוטות מבדיקה בזיכרון החיצוני במכשיר שלי.

הנקודה היא שרוב האפליקציות צד שלישי לא מצפינות את המידע שהן מאחסנות. הפלטפורמה (אנדרואיד) מתבססת על מפתחים עם אפליקציות צד שלישי, ואנחנו אוהבים להתקין אפליקציות. הבעיה היא שהם שומרים את המידע לא מוצפן ובמקרה של כרטיס ה-SD כל אחד יכול לגשת לקבצים האלו (אם הם מוצפנים ואם הם לא, ובמידה וכן כמו ב-whatsapp, זאת לא ממש בעיה לפתוח אותם בכל זאת).

&nbsp;

## **<span style="text-decoration: underline;">הצפנה</span>**

מגרסה 3.0 (honeycomb) ניתן לבצע הצפנה מלאה של המידע במכשיר. וההצפנה הינה טובה ואיתה אין לי שום בעיה, הבעיה היא שלסיסמה שההצפנה יש חוקים משלה.

"החוק" הבעייתי הינו שהסיסמה שההצפנה דורשת תהיה אותה אחת שפותחת את המכשיר (נעילת המסך). הנ"ל יוצר בעיה, כל פעם שאנו נצטרך לפתוח את המכשיר נצטרך לרשום את אותה הסיסמה כדי לפענח את ההצפנה?! אנחנו פותחים את המכשיר המון פעמים ביום, אף אחד לא היה רוצה לכתוב כל פעם סדרה קשה של תווים. אז מה שאנו עושים זה בוחרים בסיסמה הלא נכונה (לא אחת שתהיה מורכבת, בעלת סימנים, אותיות ומספרים) אלא בסיסמה פשוטה הקלה לזיכרון והקלדה, כדי שנוכל להקליד אותה מהר ולעבור את מסך הנעילה בזריזות.

מי שמצפין את כל המידע במכשיר שלו מבצע את זה במיוחד כדי שאם המכשיר ייפול לידים הלא נכונות, המידע שנמצא עליו לא יוסגר. בכך שאנחנו בוחרים סיסמה קלה לזיכרון ובעלת מספר מועט של תווים, אנחנו בוחרים סיסמה שקל יהיה לפצח בעזרת <a href="http://en.wikipedia.org/wiki/Brute-force_attack" target="_blank">Brute-force attack</a>, ואז איבדנו את הסיבה העיקרית שבשבילה הצפנו את המכשיר. במקרה הגרוע יותר, רוב האנשים משתמשים בסיסמת ה-PIN &#8211; סיסמה בעלת 4 תווים שהינם רק ספרות. וזה כבר יהיה די קל לפצח סיסמה כזאת בעזרת <a href="http://en.wikipedia.org/wiki/Brute-force_attack" target="_blank">Brute-force attack</a>, אך ורק עניין של קצת זמן.

הפתרון של ה"תקלה" הזאת יכול להיות מבוצע בדרך קלה ביותר, 2 סיסמאות! הסיסמה הראשונה הינה המורכבת ואחראית על פענוח המידע המוצפן. את הסיסמה הזאת נצטרך להכניס בעת הדלקת המכשיר לשם פענוח ראשוני של המידע. הסיסמה השנייה קלה יותר לכתיבה וזיכרון ותשמש לפתיחת מסך הנעילה. הרי בסופו של דבר אנחנו מאתחלים את המכשיר פעם ב&#8230; לא בדיוק באותו יחס שבו אנו פותחים את מסך הנעילה.

[<img class="aligncenter wp-image-964" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Brute-force_Attack.png" alt="Brute-force Attack" width="600" height="76" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Brute-force_Attack.png 626w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/Brute-force_Attack-300x37.png 300w" sizes="(max-width: 600px) 100vw, 600px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/Brute-force_Attack.png)

&nbsp;

&nbsp;

## <span style="text-decoration: underline;"><strong>החידושים של Jelly Bean בתחום האבטחה (4.1-4.2)</strong></span>

לבסוף, צריך גם לציין את החידושים והשינויים בגרסה החדשה (הלא היא JB &#8211; 4.1 &#8211; Jelly Bean ו-4.2) שגוגל מבצעת על מנת לאבטח את המערכת.

**<span style="text-decoration: underline;">נעילת הפנים</span>**

נתחיל מפיצ'ר האבטחה הכי מדובר שהגיע אלינו בגרסה ICS &#8211; 4.0. גוגל רצתה לאבטח את המכשיר בצורה הכי בטוחה, וזאת לדעתה על ידי אלגוריתם ניתוח פנים. הבעיה שזה לא כל כך הצליח לה, כבר באותו יום של ההכרזה עלו ל-Youtube המון סרטונים המדגימים כיצד המכשיר נפתח על ידי הצגת תמונה של הבעלים של המכשיר (והיום, בעידן הפייסבוק, לא בעיה למצוא תמונה של כל אחד).

מה שגוגל עשתה כדי לתקן את הבעיה הזאת (שהופכת את הפיצ'ר ללא רלוונטי) זה להכניס מנגנון בדיקת חיים (בתרגום חופשי לעברית), מה שהם בעצם מבקשים זה פשוט לקרוץ, להראות שאתה חיי ולא תמונה, ברוב הפעמים זה תיקן את הבעיה, אך בבדיקה אישית שלי, המכשיר נפתח כמה פעמים רק על ידי הזזת התמונה (וגם במציאות על ידי הזזת הראש וללא פעולת הקריצה).

גוגל בדרך הנכונה עם הפיצ'ר הזה, אך יש להם עוד הרבה עבודה על מנת להוכיח את האמינות שלו.

&nbsp;

**<span style="text-decoration: underline;">ASLR</span>**

הרבה התקפות מסתמכות על יכולתו של התוקף (המתכנת) לזהות במדויק היכן תהליכים ספציפיים או פונקציות מערכת ממוקמות בזיכרון. על מנת שתוקף ינצל חור ספציפי בפונקציה או ימנף אותה לטובתו הוא הרי חייב קודם כל "להגיד" לקוד שלו היכן למצוא את הפונקציה/תהליך שיותקף/ינוצל.

ASLR (קיצור של Address Space Layout Randomization) היא שיטת אבטחה שבסיסה הוא סידור אקראי (ועצמאי) של אזור נתונים בזיכרון בכל טעינה שלו מחדש. השיטה הזאת הוטמעה בגרסה JB 4.1 באופן מלא, כך שהמיקום של הספריות, המחסנית, הערמה וגם הלינקר, כולם מסודרים בזיכרון באופן אקראי.

כמו שניתן לראות בתמונה:

[<img class="aligncenter size-full wp-image-965" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/ASLR.png" alt="ASLR" width="451" height="144" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/ASLR.png 451w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/ASLR-300x95.png 300w" sizes="(max-width: 451px) 100vw, 451px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/ASLR.png)

בשתי הריצות של המערכת (בוצעה העלה של המערכת מחדש על ידי כיבוי והדלקה) ניתן לראות כי הקבצים לא עלו באותו מקום בזיכרון.

יש לציין כי תמיכה ב-ASLR הייתה קיימת כבר מגרסה (ICS (4.0 אך בשל העדר אקראיות הלינקר (אזורי זיכרון מקשרים) הפיצ'ר הפך לחסר תועלת. ב-4.1 גוגל הוסיפו תמיכה גם בסידור אקראי של הלינקר.

&nbsp;

<span style="text-decoration: underline;"><strong>סריקת אפליקציות בזמן אמת ב- Play</strong></span>

בגרסה 4.2 התגלה סורק רוגלות חדש, כזה שיהפוך את החיים שלנו לקצת יותר בטוחים (יש לציין כי סורק הרוגלות החדש אינו קשור לרכישה של גוגל את חברת VirusTotal).

ההבדל בין סורק הרוגלות הנ"ל ל-Bouncer עליו כתבתי במאמר הקודם (מעבר לכך ש-Bouncer כבר קיים ופועל זמן מה), הוא שה-Bouncer הינו סורק רוגלות בצד השרת של Play, ז"א כל אפליקציה שעולה ל-Play נסרקת על ידו (הוא ממש מדמה פעולה מלאה של האפליקציה על מכשיר אנדרואיד בשרת נפרד), והסורק רוגלות הנוכחי עליו מדובר, סורק את האפליקציות שיותקנו במכשיר. ה-Bouncer מבצע עוד פעולות, הנ"ל הוא הסבר במשפט, רק כדי להזכיר. למידע מלא יש לקרוא את המאמר הקודם.

[<img class="alignleft wp-image-966" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Verify_Apps.png" alt="Verify Apps" width="400" height="292" srcset="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Verify_Apps.png 609w, http://www.lifelongstudent.net/wp-content/uploads/2013/01/Verify_Apps-300x219.png 300w" sizes="(max-width: 400px) 100vw, 400px" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/Verify_Apps.png)

<span style="text-decoration: underline;">שורש הבעיה</span>

אנדרואיד ידועה בפתיחות שלה, וכתוצאה מכך אנחנו יכולים להתקין איזה אפליקציה שאנו רוצים (גם אם היא לא מה-Play). במצב כזה, שירות ה-Bouncer לא עוזר לנו, הרי האפליקציה לא נסרקה על ידיו (כי היא לא עלתה ל-Play). בדיוק במצב הזה, יקפוץ לנו חלון קטן שישאל אם ברצוננו לאפשר לגוגל לסרוק את כל האפליקציות שיותקנו במכשיר.

Hiroshi Lockheimer &#8211; סמנכ"ל ההנדסה בצוות אנדרואיד מסביר על סריקת האפליקציות במכשיר:

> "יש לנו קטלוג של 700,000 יישומים ב-Play, ומעבר לכך, אנחנו תמיד סורקים חומר באינטרנט במונחים של רכיבי APK שמופעים. כעת, יש לנו הבנה די טובה של המערכת של האפליקציה, לא משנה אם ה-APK ב-Play או לא."
>
> הוא ממשיך ומציין כי: "רוב הזמן &#8211; אם האפליקציות שנתקין יזוהו כבטוחות &#8211; אף אחד לא ירגיש שהשירות קיים. השרת עושה את כל העבודה הקשה. המכשיר שולח רק חתימה של ה-APK כך שהשרת יוכל לזהות אותו במהירות. רק אם אתם נתקלים באפליקציה לא בטוחה, תהליך ההתקנה יופרע".

&nbsp;

<span style="text-decoration: underline;">מסך ההרשאות</span>

בנוסף, בגרסה 4.2 אנו מקבלים כמה שינויים וויזואליים קטנים אך חשובים מאין כמותם. מסך ההרשאות בעת התקנת אפליקציה עבר שינויים וויזואליים ולא יסתיר יותר מידע, בנוסף לכך יהיה ליד כל הרשאה אייקון קטן המתקשר לסוג ההרשאה, ובכך הופך את המעבר עליו לקליל יותר. תמונת מצב (מימין, המצב החדש (גרסה 4.2). משמאל, המצב הישן (גרסה 4.1 ומטה)):

[<img class=" size-full wp-image-1507 aligncenter" src="http://www.lifelongstudent.net/wp-content/uploads/2013/01/Apps_Installation.png" alt="Apps Installation" width="507" height="421" />](http://www.lifelongstudent.net/wp-content/uploads/2013/01/Apps_Installation.png)

&nbsp;

<span style="text-decoration: underline;">SMS-ים בעלות</span>

בגרסה 4.2 התווספה לה תוספת נחמדה, כעת ישנו פיצ'ר חדש הפועל מאחורי הקלעים ומתריעה כל פעם שאפליקציה מנסה לשלוח SMS שעלול לעלות לנו כסף. אם אפליקציה מנסה לשלוח SMS לקוד ידוע &#8211; כזה שבאופן אוטומטי יחייב את הספק של שולח ההודעה &#8211; המערכת מקפיצה הודעה ומתריעה על הפעולה. אנו יכולים לאשר את הפעולה ולאפשר לאפליקציה להמשיך את התהליך, או למנוע אותה. זאת כמובן גם אם האפליקציה פועלת ברקע, במצב כזה חלון ההתראה יקפוץ לנו "סתם ככה" בלי שביצענו כל פעולה.

&nbsp;

<span style="text-decoration: underline;">SELinux</span>

SELinux (ראשי תיבות: Security-Enhanced Linux) זהו סדרה של תוספים לקרנל וכלים למשתמש שניתן להוסיף להפצות השונות של לינוקס. הפרויקט עצמו התחיל לראשונה בידי ה-NSA. ב-SELinux, הקונספט של root לא קיים. מדיניות האבטחה נקבעת בידי האדמין ותקפה על כל תהליך ואובייקט הקיים במערכת, ואף אחד לא יכול לעקוף זאת.

משתמשים יכולים להרוויח גישה ברמה גבוהה בעזרת הרשאות root, אם ניתן לאפליקציות מזיקות את אותן הרשאות (root), תהיה לאפליקציה גישה להכל והנזק הפוטנציאלי שתוכל לבצע גדל בעשרות מונים. ברגע שנכיל עליה את מדיניות האבטחה (ובעצם לא יהיו לה הרשאות ה-root) היא לא תוכל לבצע כל דבר ובכך אנו מקטינים את הסיכויים לחדירה למכשיר ולנזק גדול (כי בעצם אין אפשרות לאף תהליך להימלט ממדיניות האבטחה שנקבעה).

  * כמובן שגוגל לא סוגרת את אפשרות ה-root. האופציה הזאת תהיה אופציית בחירה במכשיר, וכנראה שלרוב רק ארגונים גדולים יחייבו את העובדים שלהם לבצע שימוש באותה אופציה.
  * כפרויקט קוד פתוח, צוות הפיתוח של אנדרואיד מקבל כל הזמן קוד חדש ומשלב אותו במערכת, פרויקט שילוב ה-SELinux באנדרואיד (נקרא גם SE Android) החל בינואר האחרון על ידי ה-NSA (בעוד אנדרואיד מתבססת על לינוקס היא לא לינוקס, וה-NSA ביצע שינויים כדי להתאים את התוספים והכלים למערכת האנדרואיד), וניתן לראות כי גוגל אכן משלבת כל הזמן עוד חלקי קוד עם פרויקט האנדרואיד.

&nbsp;

## **<span style="text-decoration: underline;">סיכום</span>**

מערכת האנדרואיד מתבגרת משנה לשנה ומתווספים לה המון פיצרים גם בתחום האבטחה. אך עקב האכילס שלה הינו בעיקר הפתיחות של המערכת, בכך שניתנת ליצרניות שמצידן משנות אותה ולא מספקות עדכוני אבטחה בזמן סביר ובצורה סדירה, והמפתחים שיכולים להעלות אפליקציות בלי בדיקה אחת אפילו שנעשתה על ידי גורם חיצוני ואינם מיישמים את מדיניות האבטחה (שאם נאמר את האמת גם לא כל כך קיימת).

שלא תבינו לא נכון, אני לא קורא "לסגור" את המערכת ואפילו לא קצת, אבל הנושא צריך לבוא לידי ביטוי בצורה גדולה יותר על ידי יישום מדיניות אבטחה ברורה ובאמצעות הסברים/מדריכים/סרטונים (ומה לא), כדי להפנות את צומת לב המפתחים לנושא וליישום שלו באפליקציות שלהם.

בכנס האחרון גוגל הכריזה על כלי ה-PDK שדרכו יהיו ליצרניות השונות גישה לגרסה החדשה של אנדרואיד כמה חודשים מראש, ובכך זמן העדכון אמור להתקצר (תאורטית), בינתיים זמן העדכון מתקצר רק למכשירי הדגל, בעוד שאר המכשירים מוזנחים באופן גורף. פה לדעתי האחריות היא לא על גוגל, אלא על הצרכנים להקים צעקה.

ולבסוף, מקווה שנהנתם לקרוא את המאמר לפחות כמו שנהנתי לכתוב אותו, ונתראה במאמר הבא.
