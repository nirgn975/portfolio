---
title: 'Git - חלק 2'
author: nirgn
layout: post
category: Git
---
[<img class="alignleft wp-image-1488" src="http://www.lifelongstudent.net/wp-content/uploads/2014/06/Git_Logo.png" alt="Git Logo" width="350" height="146" />](http://www.lifelongstudent.net/wp-content/uploads/2014/06/Git_Logo.png)בחלק השני של סדרת Git נלמד כיצד לראות את השינויים שביצענו בקוד, כיצד לחזור אחורה אם התחרטנו ואנו רוצים לבטל את השינויים (ישנם כמה סוגים של ביטול השינויים), סוף סוף נלמד כיצד להעלות את הפרויקט ל repo (מאגר) מרוחק, איך לשתף פעולה עם כמה אנשים ב repo אחד, ליצור ענפים (/צירי זמן) חדשים ולמזגם.

יש לציין, כי החלק הזה הנו המשך ישיר של החלק הקודם, נמשיך מאותו המקום, עם אותן הדוגמאות וכ'ו. בנוסף, מכיוון שהסדרה הזו מהווה סוג של יומן מסע, הפוסט הנל יחולק לשניים, בדיוק כפי שאני למדתי את הנושאים בשתי פעמים, לכן יהיו שני חלקים של שאלות ותשובות וסיכום ביניים.

<!--more-->

&nbsp;

## <span style="text-decoration: underline;"><strong>diff command</strong></span>

אז נניח שאליס הגיעה לעבודה, היא נמצאת ב repo המקומי שלה (מקומי, בפרויקט קיים, אצלה במחשב), ואתמול היא עשתה כמה שינויים בקובץ LICENSE, היא רוצה להמשיך אך לא זוכרת מה היו השינויים שעשתה. כדי לראות את השינויים האלו, יש לכתוב את הפקודה '<span style="color: #ff0000;">git diff</span>', הפלט של הפקודה יהיה השינויים שאינם נמצאים באזור ההיערכות, ז"א שינויים שביצענו בקבצים שהמערכת עוקבת אחריהם, אך לא ביצענו להם עדיין add מחדש (כדי לכלול את השינויים). את השורה הישנה תראו עם מינוס (-) בתחילתה, ואת השורה החדשה ניתן לראות עם פלוס (+) בתחילתה.

<pre class="lang:ps decode:true">$ git diff
diff --git a/License b/License
index 7e4922d..442669e 100644
--- a/LICENSE
+++ b/LICENSE
@@ -1,4 +1,4 @@
-Copyright (c) 2014 nirgn
+Copyright (c) 2014 nirgn</pre>

אם נוסיף את הקובץ (LICENSE) לאזור ההיערכות (עם הפקודה '<span style="color: #ff0000;">git add LICENSE</span>'), ולאחר מכן נריץ שוב את הפקודה '<span style="color: #ff0000;">git diff</span>', לא יודפס כלום. מכיוון שכל השינויים שהיו נוספו לאזור ההיערכות. אך אם נרצה לראות את השינויים באזור ההיערכות, נשתמש בפקודה '<span style="color: #ff0000;">git diff &#8211;staged</span>'. ונקבל את אותו הפלט שקיבלו מקודם.

&nbsp;

<span style="text-decoration: underline;"><strong>מה אם התחרטנו?</strong></span>

כעת, אם נכתוב '<span style="color: #ff0000;">git status</span>' נראה כי ישנו קובץ ששונה, נוסף לאזור ההיערכות, ובעצם מוכן ל commit. אך מה אם לא רצינו להוסיף את הקובץ LICENSE לאזור ההיערכות. נגיד ואליס עדיין לא סיימה לערוך אותו והוסיפה אותו מוקדם מידי, מה אז? כדי להוריד קבצים מאזור ההיערכות אנו משתמשים בפקודה '<span style="color: #ff0000;">git reset HEAD nameOfFile</span>' (החליפו את nameOfFile בשם הקובץ), אז בואו נריץ אותה על הקובץ שלנו '<span style="color: #ff0000;">git reset HEAD LICENSE</span>'. כמובן שעכשיו אנחנו צריכים להתייחס ל elephant in the room, ה HEAD. ה HEAD מתייחס ל commit האחרון (בענף הנוכחי (או ציר הזמן אם תרצו) שבו אנו נמצאים, עד כה קיים רק ענף אחד בשבילנו, master, עדיין לא נגענו באפשרויות נוספות בנושא).

עכשיו אם שוב נריץ '<span style="color: #ff0000;">git status</span>' נראה כי הקובץ מופיע ככזה שעבר שינוי, אך לא עודכן (לא נוסף לאזור ההיערכות). אך מה אם אליס התחרטה לגמרי ואינה רוצה בשינויים האלו כלל, והיא רוצה את הקובץ הזה במצב שבו הוא היה ב commit האחרון או בזמן האחרון שבו הוא שונה. נוכל לעשות זאת על ידי הפקודה '<span style="color: #ff0000;">git checkout &#8212; LICENSE</span>' וכנשריץ לאחר מכן, שוב, את הפקודה '<span style="color: #ff0000;">git status</span>' נראה כי לא היו שינויים (ז"א שהקובץ חזר למצבו לפני השינויים).

<pre class="lang:ps decode:true">$ git status
# On branch master
# Changed but not updated:
#    (use "git add &lt;file&gt;.." to update what will be comitted)
#    (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
# modified:    LICENSE</pre>

בואו נעצור שנייה, ונחזור טיפה אחורה. נגיד שאליס עשתה שינוי בקובץ README.txt, כדי לבצע לו commit היא תצטרך קודם כל להוסיף אותו לאזור ההיערכות, ז"א שעליה לכתוב 2 פקודות. הראשונה: '<span style="color: #ff0000;">git add README.txt</span>' והשניה: '<span style="color: #ff0000;">"git commit -m "Modify readme file</span>', אך יש דרך קיצור שבה אנחנו יכוליף להוסיף את הקובץ לאזור ההיערכות ולבצע commit בפקודה אחת: '<span style="color: #ff0000;">"git commit -a -m "Modify readme</span>', אך שימו לב, בפקודה הזו אנו מבצעים commit אך ורק לקבצים שאנו כבר עוקבים אחריהם. כך שאם אנחנו רוצים להוסיף קובץ חדש, נצטרך לעשות זאת בדרך הארוכה יותר, להוסיף אותו לאזור ההיערכות ולבצע commit.

&nbsp;

[<img class="alignleft size-full wp-image-1753" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/reset.png" alt="reset" width="106" height="150" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/reset.png)עד כה דיברנו על המצב בו התחרטנו לאחר שהוספנו קובץ לאזור ההיערכות, או אפילו התחרטנו על עריכת הקובץ מלכתחילה. אך מה אם ערכנו את הקובץ, הוספנו אותו לאזור ההיערכות, ביצענו commit, ואז התחרטנו! רצינו להוסיף איזה שינוי שאמור להיות כלול בתוך ה commit שעכשיו ביצענו. למזלנו יש את הפקודה '<span style="color: #ff0000;">^git reset &#8211;soft HEAD</span>' הפקודה תבטל את ה commit האחרון ותחזיר כל השינויים מה commit הזה אל אזור ההיערכות. בחלק א' הסברנו כי ה HEAD מתייחס ל commit האחרון (בענף הנוכחי, בו אנו נמצאים), אך כאן ישנו גם הסימן ^, הסימן הזה אומר: ל commit שלפני האחרון. ואם נריץ לאחר מכן שוב את הפקודה '<span style="color: #ff0000;">git status</span>' נראה כי כל השינויים כרגע, באזור ההיערכות (לפני הביטול של ה commit האחרון. אם היינו מריצים '<span style="color: #ff0000;">git status</span>' לא היינו מקבלים דבר, כי לא בוצעו שינויים מה commit האחרון, זה שהעלינו עכשיו, אך משום שביטלנו אותו וחזרנו commit אחד אחורה, ישנם שינויים), כעת ניתן לערוך את הקבצים, להוסיף חדשים וכ'ו, ולבצע commit מחדש.

<pre class="lang:ps decode:true">$ git status
# On branch master
# Changes to e committed:
# (use "git reset HEAD &lt;file&gt;.." to unstage)
#
# modified:    README.txt</pre>

דרך נוספת לבצע שינויים ב commit, היא להשתמש בפקודה amend, כך שאם לדוגמה רצינו להוסיף עוד קובץ בשם toDo.txt ל commit האחרון שלנו, נכתוב '<span style="color: #ff0000;">"git commit &#8211;amend -m "Modify readme & add toDo.txt</span>', הפקודה, כמו שאמרנו, תוסיף את הקובץ ל commit האחרון ואפילו כתבנו הודעת commit חדשה שדרסה את הקודמת ומתראת את השינויים מחדש ב commit האחרון.

אך יש עוד שתי פקודות שימושיות:

  * '<span style="color: #ff0000;">^git reset &#8211;hard HEAD</span>' &#8211; בניגוד ל soft שמבטלת את ה commit האחרון אך שמה את השינויים שלו באזור ההיערכות, זאת מבטלת את השינויים לגמרי.
  * '<span style="color: #ff0000;">^^git reset &#8211;hard HEAD</span>' &#8211; הפקודה כבר מוכרת לנו, אך באה להמחיש שבמידה ונרצה לבטל את שתי ה commit האחרונים, פשוט נוסיף עוד caret.

&nbsp;

## <span style="text-decoration: underline;"><strong>GitHub ושאר העולם</strong></span>

עד כה אליס עבדה על ה repo (המאגר) המקומי, אצלה במחשב. אבל מה אם היא רוצה להעלות את הפרויקט ל <a href="https://github.com/" target="_blank">GitHub</a> או ל <a href="https://code.google.com/" target="_blank">Google Code</a> או סתם לשרת של החברה כדי שבוב, חבר צוות, יעבוד על הגרסה העדכנית הכוללת את השינויים שביצעה. כאן נכנסות לתמונה הפקודות pull / push.

<img class="alignleft wp-image-1756" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/newRepository.png" alt="new repository" width="200" height="100" />בעצם מה שאנחנו עושים זה מעלים את הקוד ל repo אחר, מרוחק. או במילים אחרות remote repository. לכן הפקודות יהיו על בסיס '<span style="color: #ff0000;">git remote</span>'.

לפני שנמשיך, ארצה לדבר מעט על GitHub. כדי להעלות את הקוד שלכם ל GitHub, עליכם דבר ראשון להירשם. לאחר שנרשמתם, עליכם לפתוח repo ב github, אז לחצו על ה+ ואז על New repository. לאחר מכן יפתח לכם טופס כמו שזה שלמטה. ב Repository name נכתוב את שם המאגר, וב Description נכתוב את תיאור המאגר/פרויקט.

[<img class="aligncenter wp-image-1757" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/Description-.png" alt="Description" width="800" height="468" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/Description-.png)

מתחת ל Description ישנה אופציה כדי לבחור האם ה repo יהיה פומבי (כולם יוכלו לראות, לקרוא, לבצע fork וכד') או repo פרטי (יש לציין כי רק חשבונות משודרגים, שעולים כסף, יכולים לפתוח repo פרטי). מתחת לזה יש אפשרות ליצור קובץ README ל repo באופן אוטומטי. ב Add .gitgnore אנו נתאר את הז'אנר של הפרויקט שלנו וב Add a license נבחר ברישיון שתחתיו הפרויקט יהיה (זה בעצם יתאר מי, למה, כמה, איך וכד' אנשים אחרים יוכלו לעשות לקוד שהעלינו) (לא ניכנס לזה כרגע, מכיוון שזה לא קשור ל git אולי בפוסטים אחרים).

[<img class="alignleft wp-image-1759" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/Repo_URL.png" alt="Repo URL" width="390" height="92" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/Repo_URL.png)לאחר שיצרנו את ה repo, נקבל מ GitHub כתובת URL שתהיה הכתובת של ה repo שלנו, ולכתובת הזאת נדחוף את הקבצים. כדי לדחוף את הקבצים, נצטרך להריץ את הפקודה '<span style="color: #ff0000;">&#8230;&#8230;..git remote add origin https://github</span>'. בואו נראה מה הפקודה אומרת: המילה add היא הראשונה שאנחנו לא מכירים, היא בעצם אומרת שאנחנו מוסיפים remote חדש. origin הוא השם של ה remote, אנחנו יכולים לתת לו כל שם, אך מקובל לקרוא ל repo, מאגר, הראשי שלנו, זה שכל האנשים משתמשים בו כ origin. ולבסוף יש לנו את הכתובת של ה repo (החליפו את הנקודות בהמשך הכתובת שלכם).

כדי לקבל רשימה של כל ה remote שה repo המקומי שלנו מכיר (אלה שהכנסנו במהלך הזמן), נשתמש בפקודה '<span style="color: #ff0000;">git remote -v</span>'. אל תשכחו שעדיין לא דחפנו את ה repo שלנו ל GitHub, ה remote האלו הם מעניין סימניות (bookmarks). אז כעת, נדחוף את ה repo שלנו בעזרת הפקודה '<span style="color: #ff0000;">git push origin master</span>'. שימו לב שאנו מפרטים את שם ה repo המרוחק (origin) ואת הענף (ציר הזמן אם תרצו) אליו נרצה לדחוף (master). ומכיוון שאנו משתמשים ב GitHub, המערכת תרצה את שם המשתמש שלנו והסיסמה (כדי לוודא שאנו מורשים לדחוף ל repo הזה).

אם נרענן כעת את הדף ב GitHub נראה שהמערכת מציגה את הקבצים החדשים, ובנוסף ישנו כפתור ה Network (בעמודה של התפריט בצד ימין, אחד לפני האחרון, מעל ההגדרות) שם נוכל לראות את הענפים ואת כל ה commit שביצענו ביחד עם התיאור של כל commit, מי ביצע אותו וכד', או בקיצור תחליף לכתיבת '<span style="color: #ff0000;">git log</span>' בשורת הפקודה.

אז דחפנו את ה repo שלנו ל GitHub (או כל שרת אחר), אבל אנחנו עובדים בצוות, ואנחנו לא היחידים שעושים שינויים, אז איך אנחנו מושכים חזרה את ה repo המרוחק כדי לעדכן את ה repo המקומי שלנו? בעזרת הפקדה '<span style="color: #ff0000;">git pull</span>' (כמובן שתהיו עם שורת הפקודה בתוך ה repo המקומי שלכם).

נחזור קצת אחורה, מקובל שהשם המרכזי של ה repo המרוחק (remote) יהיה origin, אך זה לא אומר שיכול להיות לנו כמה כאלה. לדוגמה origin כמובן, ואולי גם test שבו אנו מריצים את הבדיקות שלנו, וכ'ו. בנוסף, ראינו את הפקודה להוספת remote (הפקודה '<span style="color: #ff0000;"><git remote add<name> <address</span>'), אך בשביל להסיר remote, הפקודה שונה: '<span style="color: #ff0000;"><git remote rm <name</span>'. וכדי לסכם את הכל, נחזור גם על הפקודה איתה אנו דוחפים את הקוד ל remote והיא '<span style="color: #ff0000;"><git push -u <name> <branch</span>', אם שמתם לב בפקודה המקורית אותה כתבנו למעלה לא היה u- וזה נכון, מכיוון שאתם לא חייבים להוסיף אותה. ה u- תשמור את השם והענף של ה remote כדי שפעם באה שתרצו לדחוף קוד לשרת תוכלו לכתוב רק '<span style="color: #ff0000;">git push</span>' (ללא שם ה remote והענף).

&nbsp;

## <span style="text-decoration: underline;"><strong>שאלות ותשובות</strong></span>

הגענו לחלק של השאלות והתשובות. שוב, זהו לא תחליף לתרגול, אם אין לכם פרויקט שאתם יכולים / רוצים לשתף, צרו תיקייה ובתוכה קובץ טקסט פשוט ותתרגלו. אין תחליף לתרגול אישי במחשב שלכם עם שורת הפקודה שלכם. הלמידה הטובה ביותר מגיעה דרך האצבעות, אז כתבו אותן בעצמכם, גם אם אתם לא זוכרים איך מי מו ומה, חזרו, תחפשו, תתנסו, ומקסימום תסתכלו בתשובות. אך תכתבו אותן בעצמכם ואל תתפתו להשתמש ב copy-paste, אחרי כתיבת הפקודה פעם, פעמיים, שלוש זה יגיע.

<span style="text-decoration: underline;"><strong>שאלות</strong></span>

  1. נוסף קובץ חדש לאתר, כתבו פקודה שתראה לכם את כל השינויים שהיו מאז ה commit האחרון.
  2. ישנו קובץ חדש בשם contactPage.html, הוסיפו אותו לאזור ההיערכות .
  3. חבר שלכם לצוות עצר ליד העמדה שלכם ומעוניין לראות את הדף החדש, הראו לו.
  4. חכו! חבר שלכם לצוות מעדכן אתכם שהלקוח בסוף אינו מעוניין בדף הזה, הורידו אותו אותו מאזור ההיערכות.
  5. ביצענו שינויים בדף הראשי, index.html, מכיוון שהמערכת כבר עוקבת אחרי הקובץ הזה, פשוט הוסיפו אותו שוב לאזור ההיערכות ובצעו לו commit (בפקודה אחת).
  6. אופס! שכחנו להוסיף עוד דף בשם map.html שה index מקשר אליו, והאמת שהוא צריך להיות באותו ה commit ביחד עם ה index.html. תקנו זאת (הדף חדש, המערכת אינה עוקבת אחריו).
  7. חכו רגע! החלק של ה map.html התבטל, החזירו אותו לאזור ההיערכות.
  8. עזבו, כל הפרויקט התבטל, בטלו את השינויים ב index.html ואת map.html.
  9. בכל זאת, משהו נשאר מהפרויקט, חבר שלכם לצוות שלח לכם את הכתובת של ה repo המרוחק (remote) והוא: git@example.com:example.git. הוסיפו את הכתובת ככתובת של ה origin במאגר.
 10. סיימתם להיום, נשאר רק לדחוף את הקוד ל remote repo (השתמשו ב u- בפקודה כדי שלא תצטרכו לכתוב את הכל שוב בפעם הבאה)..

<span style="text-decoration: underline;"><strong>תשובות</strong></span>

  1. הפקודה: '<span style="color: #ff0000;">git diff</span>'.
  2. הפקודה: '<span style="color: #ff0000;">git add contactPage.html</span>'.
  3. הפקודה: '<span style="color: #ff0000;">git diff &#8211;staged</span>'.
  4. הפקודה: '<span style="color: #ff0000;">git reset HEAD contactPage.html</span>'.
  5. הפקודה: '<span style="color: #ff0000;">"git commit -a -m "Modify index.html</span>'.
  6. מכיוון שמהערכת אינה עוקבת אחרי הדף יש צורך קודם כל להוסיפו לאזור ההיערכות עם הפקודה: '<span style="color: #ff0000;">git add map.html</span>'. ונוסיף את הדף ל commit הקודם עם הפקודה: '<span style="color: #ff0000;">"git commit &#8211;amend -m "Modify index.html & add map.html</span>'.
  7. הפקודה: '<span style="color: #ff0000;">^git reset &#8211;soft HEAD</span>'.
  8. הפקודה: '<span style="color: #ff0000;">git checkout &#8212; index.html map.html</span>'.
  9. הפקודה: '<span style="color: #ff0000;">git remote add origin git@example.com:example.git</span>'.
 10. הפקודה: '<span style="color: #ff0000;">git push -u origin master</span>'.

&nbsp;

## <span style="text-decoration: underline;"><strong>סיכום ביניים</strong></span>

אז עד כה למדנו את כיצד לראות שינויים שהתבצעו בקוד של הפרויקט ואפילו בקוד בקובץ ספציפי (אם אלה קבצים שהוספנו או עדיין לא הוספנו לאזור ההיערכות), וכמו כן ראינו מה ניתן לעשות במצב שבו התחרטנו (אם זה על קוד שהעלינו לאזור ההיערכות או קוד שכבר עשינו לו commit, אם זה קוד שאנחנו רוצים להחזיר לאזור ההיערכות (מ commit), קוד שאנחנו רוצים לבטל כליל (לבטל קוד שהוספנו מאזור ההיערכות או קוד שכבר ביצענו לו commit ואנחנו רוצים לחזור commit אחד (או כמה) לפניו), או להוסיף קובץ ולתקן את התיאור של ה commit האחרון שביצענו). ולבסוף צעדנו קצת לתוך העולם של GitHub (כיצד ליצור repo מרוחק, כיצד להגיד את הנתיב כדי לדחוף את ה repo שלנו ל repo המרוחק, וכיצד לדחוף את הקוד ב repo המקומי שלנו ל repo המרוחק.

עכשיו, הייתי ממליץ לקחת הפסקה קטנה לתרגול הפקודות החדשות, לראות שהכל יושב טוב, אם ישנו משהו שעדיין אינכם מרגישים איתו בנוח, חזרו לקרוא את הפסקה עליו, תשאלו בתגובות, ותנסו לחפש עוד מידע בגוגל (השתדלו לא להמשיך הלאה אם משהו אינו יושב טוב).

&nbsp;

## <span style="text-decoration: underline;"><strong>שיתוף פעולה</strong></span>

[<img class="alignleft size-full wp-image-1761" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/URL.png" alt="URL" width="180" height="90" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/URL.png)שיתוף פעולה בפרויקטים בין אנשים הוא דבר חשוב, הוא קורה כל הזמן, אם זה כצוות שעובד על אותו הפרויקט, ואם זה כפרויקט קוד פתוח שאנשים שונים תורמים חלקים שונים, מתקנים באגים וכד'. אז בואו נניח שבוב שעובד ביחד עם אליס בצוות, רוצה עותק של ה repo על מנת להתחיל לעבוד על פיצ'ר חדש בפרויקט. כיצד הוא יכול להשיג עותק כזה? פשוט לבצע שיבוט (clone) של ה repo. אם אתם משתמשים ב GitHub לדוגמה, גשו לעמוד של הפרויקט, ובחרו code, למטה קצת מעל ה "Download ZIP" יש קוביית טקסט שהכותרת שלה היא "HTTPS clone URL" (ניתן לראות דוגמה בתמונה משמאל). על מנת לשבט את ה repo אנחנו צריכים את הכתובת שלה, וזה מה שהשגנו כעת. בשביל לשבט נכתוב '<span style="color: #ff0000;"><git clone <URL</span>' (את ה URL ביחד עם הסוגרים המשולשים החליפו בכתובת של repo שהעתקתם).

הפקודה תיצור repo (מאגר) מקומי, אצלכם במחשב, בשם ה repo ממנו שיבטתם את הפרויקט (אם ברצונכם לשנות את השם של ה repo אתם יכולים להשתמש בפקודה '<span style="color: #ff0000;">git clone <URL> newName</span>', בעצם פשוט עשו רווח אחרי ה url של ה repo אותו אתם משבטים וכתבו את השם שברצונכם לתת ל repo המשובט והמקומי שלכם).

ברגע שעשינו שיבוט (clone) ל repo. המערכת (git) עושה 3 דברים: הראשון &#8211; מורידה את כל ה repo לתיקייה במחשב שלכם (בשם ה repo ממנו שיבטתם או בשם שנתתם). השני &#8211; מוסיפה לפרויקט המקומי ששיבטנו, remote חדש בשם origin, שמצביע ל URL ממנו שיבטנו (זוכרים כיצד ניתן לבדוק את זה? ע"י הפקודה '<span style="color: #ff0000;">git remote -v</span>'). והשלישי &#8211; המערכת תגדיר את הענף הראשי (כנראה יהיה master) ותכוון את ה HEAD שלנו להיות ב commit האחרון.

&nbsp;

## <span style="text-decoration: underline;"><strong><img class="alignleft wp-image-1762" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/newBranch.png" alt="New Branch" width="85" height="196" />ענפים ומיזוגם</strong></span>

כעת, בוב מוכן לעבוד על הפיצ'ר החדש בפרויקט. כדי לעשות את זה, כדאי מאוד ליצור ענף (branch) חדש ולא לעבוד על אותו ענף שבו הפרויקט הראשי נמצא. יצירת ענף חדש (או אם תרצו ציר זמן חדש, שיוצא / מתפצל מהענף / ציר הזמן הנוכחי) (נקרא לו cat) מתבצעת ע"י הפקודה '<span style="color: #ff0000;"><git branch <nameOfBranch</span>' (ניסיתי לצייר בתמונה משמאל כיצד תראה יצירת הענף החדש (של בוב [: ), לאחר ה commit האחרון). אך אם נבדוק על איזה ענף אנחנו (עם הפקודה '<span style="color: #ff0000;">git branch</span>'), נראה שאנחנו (ה HEAD) עדיין בענף master. אז כדי לעבור לענף של ה cat נכתוב את הפקודה '<span style="color: #ff0000;">git checkout cat</span>'. כעת, אנחנו בעצם בציר זמן אחר, נוכל לעשות עם הפרויקט מה שאנחנו רוצים והשינויים ישמרו רק בענף cat. נוכל בכל רגע לעבור חזרה לענף(/ציר הזמן) של ה master ולראות את הפרויקט מזווית אחרת (ללא השינויים שעשינו, בנוסף, אם חברי הצוות עשו שינויים ובצעו commit לענף master, נוכל לסנכרן את הפרויקט (ע"י הפקודה '<span style="color: #ff0000;">git pull</span>') ולראות את השינויים שלהם.

<pre class="lang:ps decode:true">$ git branch cat</pre>

<img class="alignleft wp-image-1763" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/newBranchCommit.png" alt="New Branch Commit" width="110" height="192" />עכשיו כשאנחנו בענף cat, בואו ניצור קובץ txt חדש בשם cat.txt, ונכתוב בתוכו "schrodinger" (הרי החתול הזה צריך להיות שייך למישהו [; ), נוסיף אותו לאזור ההיערכות (עם הפקודה '<span style="color: #ff0000;">git add cat.txt</span>'), נבצע לו commit (עם הפקודה '<span style="color: #ff0000;">"git commit -m "Creat quantum cat</span>'). וה commit שביצענו כרגע, יתווסף לענף (/ציר הזמן) של ה cat (כי עליו ביצענו את ה commit).

עכשיו אם נכתוב בשורת הפקודה '<span style="color: #ff0000;">ls</span>' כדי לראות את הקבצים המופיעים בתיקייה שלנו, נראה את cat.txt, אך אם נעבור לענף הראשי (עם הפקודה: '<span style="color: #ff0000;">git checkout master</span>', ונכתוב שוב '<span style="color: #ff0000;">ls</span>' לא נראה את הקובץ cat.txt, הוא פשוט לא קיים בענף / ציר הזמן הזה. גם אם נכתוב את הפקודה '<span style="color: #ff0000;">git log</span>' לא נראה את ה commit שבוצע ל cat.txt. רק כדי לבדוק שאנחנו לא משוגעים, נחזור לענף cat (בעזרת הפקודה '<span style="color: #ff0000;">git checkout cat</span>', נכתוב '<span style="color: #ff0000;">ls</span>' ונראה את הקובץ cat.txt, גם אם נכתוב '<span style="color: #ff0000;">git log</span>' נראה את התיעוד של ה commit שביצענו.

&nbsp;

&nbsp;

[<img class="alignleft wp-image-1765" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/merge.png" alt="merge" width="140" height="179" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/merge.png)בואו נניח שסיימנו לעשות את כל השינויים שרצינו בענף cat, ואנחנו רוצים לשלב את השינויים בפרויקט שבענף הראשי, master. אז נחזור לענף master עם הפקודה '<span style="color: #ff0000;">git checkout master</span>' ועכשיו כשה HEAD שלנו בענף master, נשלב לתוכו את הענף cat עם הפקודה '<span style="color: #ff0000;">git merge cat</span>', ניתן לראות בתמונה משמאל הדגמה לאיך שיראו הענפים לאחר הרצת הפקודה. בנוסף, בפלט שנקבל יופיע המילים "Fast-forward", מה זה בעצם אומר?

כשאנו מפצלים ענף חדש, עושים בו כמה שינויים ובענף השני לא (כמו בדוגמה כאן, ב master לא ביצענו שינויים כלל, אך ב cat ביצענו commit אחד) זה קל מאוד ל git לשלב בין הענפים, כי בינתיים לא בוצע כלום בענף master (בהמשך נראה דוגמאות אחרות ונרחיב את הדיבור בנושא).

<pre class="lang:ps decode:true">$ git merge cat
Updating 1191ceb..ab48a3f
Fast-forward
 cat.txt |    1 +
 1 file changed, 1 insertion(+)
 create mode 100644 cat.txt</pre>

[<img class="alignleft wp-image-1766" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/checkoutDog.png" alt="Checkout Dog" width="110" height="161" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/checkoutDog.png)כשסיימנו עם הענף (במקרה שלנו cat) אנחנו יכולים פשוט למחוק אותו עם הפקודה '<span style="color: #ff0000;">git branch -d cat</span>'. עכשיו בואו ניצור ענף (branch) חדש כדי לעבוד על פיצר שונה, נקרא לו dog, הפעם נשתמש בקיצור דרך הקיים כדי ליצור branch חדש ולעבור אליו ישר בפקודה אחת (במקום הפקודה '<span style="color: #ff0000;">git branch dog</span>', ופקודה כדי לעבור אליו '<span style="color: #ff0000;">git checkout dog</span>'), נכתוב את הפקודה '<span style="color: #ff0000;">git checkout -b dog</span>'. נוסיף קובץ חדש בשם labrador.html (עם הפקודה '<span style="color: #ff0000;">git add dog/labrador.html</span>', הנחנו שהוא בתיקייה dog בשביל דוגמה קצת יותר מורכבת) ונבצע לו commit. לאחר מכן נוסיף עוד קובץ חדש בשם germanShepherd.html (בעזרת הפקודה '<span style="color: #ff0000;">git add dog/germanShepherd.html</span>') וגם לו נבצע commit. שימו לב בתמונה משמאל כיצד נראה ציר הזמן עכשיו (ה HEAD זז איתנו כל פעם שאנו מבצעים commit).

<pre class="lang:ps decode:true">$ git checkout -b dog
Switched to a new branch 'dog'
...
$ git add dog/labrador.html
$ git commit -m 'Add Labrador'
...
$ git add dog/germanShepherd.html
$ git commit -m 'Add German Shepherd'</pre>

אך באמצע שבוב עובד עם הענף dog, הוא מקבל sms מהבוס שיש באגים ב master, הם לא סובלים דיחוי וחייבים לתקן אותם במהרה. אז הוא עובר ל master (עם הפקודה '<span style="color: #ff0000;">git checkout master</span>') (ניתן להריץ אח"כ '<span style="color: #ff0000;">git branch</span>' בשביל לוודא כי אכן עברנו ל master) לאחר מכן, בוב מושך מה remote repo (המאגר המרוחק) את המידע כדי לוודא שיש לו את הפרויקט העדכני (מי זוכר מתי פעם אחרונה הוא התעסק איתו ואם מישהו בצוות עשה שינויים מאז, עדייף להיות בטוחים מאשר להצטער) עם הפקודה '<span style="color: #ff0000;">git pull</span>'. שימו לב שכרגע החץ עם ה HEAD אמור להיות ב commit העדכני ביותר ב master, שלפי התמונה למעלה אמור להיות ה commit השני, ממש לפני הפיצול של dog.

&nbsp;

בוב מתקן את מה שצריך לתקן, בוא נאמר main.js, ומבצע לו commit עם הפקודה '<span style="color: #ff0000;">"git commit -m "Fix main.js</span>' ודוחף את השינוי ל master ב remote (לענף master במאגר המרוחק) עם הפקודה '<span style="color: #ff0000;">git push</span>' (נניח וכבר ביצענו פעם commit עם u- כדי לשמור את הניתוב וכ'ו).

<pre class="lang:default decode:true">$ git checkout master
  Switched to branch 'master'
$ git branch
  admin
* master
$ git pull
...
$ git add main.js
$ git commit -m 'Fix man.js'
...
$ git push</pre>

[<img class="alignleft wp-image-1767" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/fixMainJS.png" alt="Fix MainJS" width="100" height="162" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/fixMainJS.png)עכשיו כשסיימנו לטפל במקרה החירום, הגיע הזמן לחזור לפרויקט שלנו בענף dog עם הפקודה '<span style="color: #ff0000;">git checkout dog</span>', מסיימים את העבודה, ועוברים חזרה ל master (עם הפקודה '<span style="color: #ff0000;">git checkout master</span>') כדי למזג את הפרויקט בעזרת הפקודה '<span style="color: #ff0000;">git merge dog</span>'. והפעם, בניגוד למיזוג עם cat, ביצענו שינויים ב master אחרי יצירת הענף החדש, dog, אז כשנמזג בין הענפים יפתח לנו עורך הנקרא VI (אם מוגדר עורך אחר כברירת מחדל הוא יפתח במקומו). העורך נראה כמו בתמונה למטה. בפתיחת העורך git אומרת לנו או קיי, עשיתי את ה commit הזה בשבילך כי אני רואה שאתה מנסה למזג בין 2 הענפים האלו, אך אם אתה צריך להיות ספציפי יותר, בבקשה תוסיף את זה להודעה שלמעלה (ניתן לראות שכתוב בה 'Merge branch 'dog). ניתן לערוך את ההודעה הזאת, וכשסיימנו נכתוב '<span style="color: #ff0000;">wq:</span>' (ה w מסמלת write וה q מסמלת quit) כדי לחזור חזרה לשורת הפקודה.

[[<img class="alignleft wp-image-1488" src="http://www.lifelongstudent.net/wp-content/uploads/2014/06/Git_Logo.png" alt="Git Logo" width="350" height="146" />](http://www.lifelongstudent.net/wp-content/uploads/2014/06/Git_Logo.png)בחלק השני של סדרת Git נלמד כיצד לראות את השינויים שביצענו בקוד, כיצד לחזור אחורה אם התחרטנו ואנו רוצים לבטל את השינויים (ישנם כמה סוגים של ביטול השינויים), סוף סוף נלמד כיצד להעלות את הפרויקט ל repo (מאגר) מרוחק, איך לשתף פעולה עם כמה אנשים ב repo אחד, ליצור ענפים (/צירי זמן) חדשים ולמזגם.

יש לציין, כי החלק הזה הנו המשך ישיר של החלק הקודם, נמשיך מאותו המקום, עם אותן הדוגמאות וכ'ו. בנוסף, מכיוון שהסדרה הזו מהווה סוג של יומן מסע, הפוסט הנל יחולק לשניים, בדיוק כפי שאני למדתי את הנושאים בשתי פעמים, לכן יהיו שני חלקים של שאלות ותשובות וסיכום ביניים.

<!--more-->

&nbsp;

## <span style="text-decoration: underline;"><strong>diff command</strong></span>

אז נניח שאליס הגיעה לעבודה, היא נמצאת ב repo המקומי שלה (מקומי, בפרויקט קיים, אצלה במחשב), ואתמול היא עשתה כמה שינויים בקובץ LICENSE, היא רוצה להמשיך אך לא זוכרת מה היו השינויים שעשתה. כדי לראות את השינויים האלו, יש לכתוב את הפקודה '<span style="color: #ff0000;">git diff</span>', הפלט של הפקודה יהיה השינויים שאינם נמצאים באזור ההיערכות, ז"א שינויים שביצענו בקבצים שהמערכת עוקבת אחריהם, אך לא ביצענו להם עדיין add מחדש (כדי לכלול את השינויים). את השורה הישנה תראו עם מינוס (-) בתחילתה, ואת השורה החדשה ניתן לראות עם פלוס (+) בתחילתה.

<pre class="lang:ps decode:true">$ git diff
diff --git a/License b/License
index 7e4922d..442669e 100644
--- a/LICENSE
+++ b/LICENSE
@@ -1,4 +1,4 @@
-Copyright (c) 2014 nirgn
+Copyright (c) 2014 nirgn</pre>

אם נוסיף את הקובץ (LICENSE) לאזור ההיערכות (עם הפקודה '<span style="color: #ff0000;">git add LICENSE</span>'), ולאחר מכן נריץ שוב את הפקודה '<span style="color: #ff0000;">git diff</span>', לא יודפס כלום. מכיוון שכל השינויים שהיו נוספו לאזור ההיערכות. אך אם נרצה לראות את השינויים באזור ההיערכות, נשתמש בפקודה '<span style="color: #ff0000;">git diff &#8211;staged</span>'. ונקבל את אותו הפלט שקיבלו מקודם.

&nbsp;

<span style="text-decoration: underline;"><strong>מה אם התחרטנו?</strong></span>

כעת, אם נכתוב '<span style="color: #ff0000;">git status</span>' נראה כי ישנו קובץ ששונה, נוסף לאזור ההיערכות, ובעצם מוכן ל commit. אך מה אם לא רצינו להוסיף את הקובץ LICENSE לאזור ההיערכות. נגיד ואליס עדיין לא סיימה לערוך אותו והוסיפה אותו מוקדם מידי, מה אז? כדי להוריד קבצים מאזור ההיערכות אנו משתמשים בפקודה '<span style="color: #ff0000;">git reset HEAD nameOfFile</span>' (החליפו את nameOfFile בשם הקובץ), אז בואו נריץ אותה על הקובץ שלנו '<span style="color: #ff0000;">git reset HEAD LICENSE</span>'. כמובן שעכשיו אנחנו צריכים להתייחס ל elephant in the room, ה HEAD. ה HEAD מתייחס ל commit האחרון (בענף הנוכחי (או ציר הזמן אם תרצו) שבו אנו נמצאים, עד כה קיים רק ענף אחד בשבילנו, master, עדיין לא נגענו באפשרויות נוספות בנושא).

עכשיו אם שוב נריץ '<span style="color: #ff0000;">git status</span>' נראה כי הקובץ מופיע ככזה שעבר שינוי, אך לא עודכן (לא נוסף לאזור ההיערכות). אך מה אם אליס התחרטה לגמרי ואינה רוצה בשינויים האלו כלל, והיא רוצה את הקובץ הזה במצב שבו הוא היה ב commit האחרון או בזמן האחרון שבו הוא שונה. נוכל לעשות זאת על ידי הפקודה '<span style="color: #ff0000;">git checkout &#8212; LICENSE</span>' וכנשריץ לאחר מכן, שוב, את הפקודה '<span style="color: #ff0000;">git status</span>' נראה כי לא היו שינויים (ז"א שהקובץ חזר למצבו לפני השינויים).

<pre class="lang:ps decode:true">$ git status
# On branch master
# Changed but not updated:
#    (use "git add &lt;file&gt;.." to update what will be comitted)
#    (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
# modified:    LICENSE</pre>

בואו נעצור שנייה, ונחזור טיפה אחורה. נגיד שאליס עשתה שינוי בקובץ README.txt, כדי לבצע לו commit היא תצטרך קודם כל להוסיף אותו לאזור ההיערכות, ז"א שעליה לכתוב 2 פקודות. הראשונה: '<span style="color: #ff0000;">git add README.txt</span>' והשניה: '<span style="color: #ff0000;">"git commit -m "Modify readme file</span>', אך יש דרך קיצור שבה אנחנו יכוליף להוסיף את הקובץ לאזור ההיערכות ולבצע commit בפקודה אחת: '<span style="color: #ff0000;">"git commit -a -m "Modify readme</span>', אך שימו לב, בפקודה הזו אנו מבצעים commit אך ורק לקבצים שאנו כבר עוקבים אחריהם. כך שאם אנחנו רוצים להוסיף קובץ חדש, נצטרך לעשות זאת בדרך הארוכה יותר, להוסיף אותו לאזור ההיערכות ולבצע commit.

&nbsp;

[<img class="alignleft size-full wp-image-1753" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/reset.png" alt="reset" width="106" height="150" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/reset.png)עד כה דיברנו על המצב בו התחרטנו לאחר שהוספנו קובץ לאזור ההיערכות, או אפילו התחרטנו על עריכת הקובץ מלכתחילה. אך מה אם ערכנו את הקובץ, הוספנו אותו לאזור ההיערכות, ביצענו commit, ואז התחרטנו! רצינו להוסיף איזה שינוי שאמור להיות כלול בתוך ה commit שעכשיו ביצענו. למזלנו יש את הפקודה '<span style="color: #ff0000;">^git reset &#8211;soft HEAD</span>' הפקודה תבטל את ה commit האחרון ותחזיר כל השינויים מה commit הזה אל אזור ההיערכות. בחלק א' הסברנו כי ה HEAD מתייחס ל commit האחרון (בענף הנוכחי, בו אנו נמצאים), אך כאן ישנו גם הסימן ^, הסימן הזה אומר: ל commit שלפני האחרון. ואם נריץ לאחר מכן שוב את הפקודה '<span style="color: #ff0000;">git status</span>' נראה כי כל השינויים כרגע, באזור ההיערכות (לפני הביטול של ה commit האחרון. אם היינו מריצים '<span style="color: #ff0000;">git status</span>' לא היינו מקבלים דבר, כי לא בוצעו שינויים מה commit האחרון, זה שהעלינו עכשיו, אך משום שביטלנו אותו וחזרנו commit אחד אחורה, ישנם שינויים), כעת ניתן לערוך את הקבצים, להוסיף חדשים וכ'ו, ולבצע commit מחדש.

<pre class="lang:ps decode:true">$ git status
# On branch master
# Changes to e committed:
# (use "git reset HEAD &lt;file&gt;.." to unstage)
#
# modified:    README.txt</pre>

דרך נוספת לבצע שינויים ב commit, היא להשתמש בפקודה amend, כך שאם לדוגמה רצינו להוסיף עוד קובץ בשם toDo.txt ל commit האחרון שלנו, נכתוב '<span style="color: #ff0000;">"git commit &#8211;amend -m "Modify readme & add toDo.txt</span>', הפקודה, כמו שאמרנו, תוסיף את הקובץ ל commit האחרון ואפילו כתבנו הודעת commit חדשה שדרסה את הקודמת ומתראת את השינויים מחדש ב commit האחרון.

אך יש עוד שתי פקודות שימושיות:

  * '<span style="color: #ff0000;">^git reset &#8211;hard HEAD</span>' &#8211; בניגוד ל soft שמבטלת את ה commit האחרון אך שמה את השינויים שלו באזור ההיערכות, זאת מבטלת את השינויים לגמרי.
  * '<span style="color: #ff0000;">^^git reset &#8211;hard HEAD</span>' &#8211; הפקודה כבר מוכרת לנו, אך באה להמחיש שבמידה ונרצה לבטל את שתי ה commit האחרונים, פשוט נוסיף עוד caret.

&nbsp;

## <span style="text-decoration: underline;"><strong>GitHub ושאר העולם</strong></span>

עד כה אליס עבדה על ה repo (המאגר) המקומי, אצלה במחשב. אבל מה אם היא רוצה להעלות את הפרויקט ל <a href="https://github.com/" target="_blank">GitHub</a> או ל <a href="https://code.google.com/" target="_blank">Google Code</a> או סתם לשרת של החברה כדי שבוב, חבר צוות, יעבוד על הגרסה העדכנית הכוללת את השינויים שביצעה. כאן נכנסות לתמונה הפקודות pull / push.

<img class="alignleft wp-image-1756" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/newRepository.png" alt="new repository" width="200" height="100" />בעצם מה שאנחנו עושים זה מעלים את הקוד ל repo אחר, מרוחק. או במילים אחרות remote repository. לכן הפקודות יהיו על בסיס '<span style="color: #ff0000;">git remote</span>'.

לפני שנמשיך, ארצה לדבר מעט על GitHub. כדי להעלות את הקוד שלכם ל GitHub, עליכם דבר ראשון להירשם. לאחר שנרשמתם, עליכם לפתוח repo ב github, אז לחצו על ה+ ואז על New repository. לאחר מכן יפתח לכם טופס כמו שזה שלמטה. ב Repository name נכתוב את שם המאגר, וב Description נכתוב את תיאור המאגר/פרויקט.

[<img class="aligncenter wp-image-1757" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/Description-.png" alt="Description" width="800" height="468" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/Description-.png)

מתחת ל Description ישנה אופציה כדי לבחור האם ה repo יהיה פומבי (כולם יוכלו לראות, לקרוא, לבצע fork וכד') או repo פרטי (יש לציין כי רק חשבונות משודרגים, שעולים כסף, יכולים לפתוח repo פרטי). מתחת לזה יש אפשרות ליצור קובץ README ל repo באופן אוטומטי. ב Add .gitgnore אנו נתאר את הז'אנר של הפרויקט שלנו וב Add a license נבחר ברישיון שתחתיו הפרויקט יהיה (זה בעצם יתאר מי, למה, כמה, איך וכד' אנשים אחרים יוכלו לעשות לקוד שהעלינו) (לא ניכנס לזה כרגע, מכיוון שזה לא קשור ל git אולי בפוסטים אחרים).

[<img class="alignleft wp-image-1759" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/Repo_URL.png" alt="Repo URL" width="390" height="92" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/Repo_URL.png)לאחר שיצרנו את ה repo, נקבל מ GitHub כתובת URL שתהיה הכתובת של ה repo שלנו, ולכתובת הזאת נדחוף את הקבצים. כדי לדחוף את הקבצים, נצטרך להריץ את הפקודה '<span style="color: #ff0000;">&#8230;&#8230;..git remote add origin https://github</span>'. בואו נראה מה הפקודה אומרת: המילה add היא הראשונה שאנחנו לא מכירים, היא בעצם אומרת שאנחנו מוסיפים remote חדש. origin הוא השם של ה remote, אנחנו יכולים לתת לו כל שם, אך מקובל לקרוא ל repo, מאגר, הראשי שלנו, זה שכל האנשים משתמשים בו כ origin. ולבסוף יש לנו את הכתובת של ה repo (החליפו את הנקודות בהמשך הכתובת שלכם).

כדי לקבל רשימה של כל ה remote שה repo המקומי שלנו מכיר (אלה שהכנסנו במהלך הזמן), נשתמש בפקודה '<span style="color: #ff0000;">git remote -v</span>'. אל תשכחו שעדיין לא דחפנו את ה repo שלנו ל GitHub, ה remote האלו הם מעניין סימניות (bookmarks). אז כעת, נדחוף את ה repo שלנו בעזרת הפקודה '<span style="color: #ff0000;">git push origin master</span>'. שימו לב שאנו מפרטים את שם ה repo המרוחק (origin) ואת הענף (ציר הזמן אם תרצו) אליו נרצה לדחוף (master). ומכיוון שאנו משתמשים ב GitHub, המערכת תרצה את שם המשתמש שלנו והסיסמה (כדי לוודא שאנו מורשים לדחוף ל repo הזה).

אם נרענן כעת את הדף ב GitHub נראה שהמערכת מציגה את הקבצים החדשים, ובנוסף ישנו כפתור ה Network (בעמודה של התפריט בצד ימין, אחד לפני האחרון, מעל ההגדרות) שם נוכל לראות את הענפים ואת כל ה commit שביצענו ביחד עם התיאור של כל commit, מי ביצע אותו וכד', או בקיצור תחליף לכתיבת '<span style="color: #ff0000;">git log</span>' בשורת הפקודה.

אז דחפנו את ה repo שלנו ל GitHub (או כל שרת אחר), אבל אנחנו עובדים בצוות, ואנחנו לא היחידים שעושים שינויים, אז איך אנחנו מושכים חזרה את ה repo המרוחק כדי לעדכן את ה repo המקומי שלנו? בעזרת הפקדה '<span style="color: #ff0000;">git pull</span>' (כמובן שתהיו עם שורת הפקודה בתוך ה repo המקומי שלכם).

נחזור קצת אחורה, מקובל שהשם המרכזי של ה repo המרוחק (remote) יהיה origin, אך זה לא אומר שיכול להיות לנו כמה כאלה. לדוגמה origin כמובן, ואולי גם test שבו אנו מריצים את הבדיקות שלנו, וכ'ו. בנוסף, ראינו את הפקודה להוספת remote (הפקודה '<span style="color: #ff0000;"><git remote add<name> <address</span>'), אך בשביל להסיר remote, הפקודה שונה: '<span style="color: #ff0000;"><git remote rm <name</span>'. וכדי לסכם את הכל, נחזור גם על הפקודה איתה אנו דוחפים את הקוד ל remote והיא '<span style="color: #ff0000;"><git push -u <name> <branch</span>', אם שמתם לב בפקודה המקורית אותה כתבנו למעלה לא היה u- וזה נכון, מכיוון שאתם לא חייבים להוסיף אותה. ה u- תשמור את השם והענף של ה remote כדי שפעם באה שתרצו לדחוף קוד לשרת תוכלו לכתוב רק '<span style="color: #ff0000;">git push</span>' (ללא שם ה remote והענף).

&nbsp;

## <span style="text-decoration: underline;"><strong>שאלות ותשובות</strong></span>

הגענו לחלק של השאלות והתשובות. שוב, זהו לא תחליף לתרגול, אם אין לכם פרויקט שאתם יכולים / רוצים לשתף, צרו תיקייה ובתוכה קובץ טקסט פשוט ותתרגלו. אין תחליף לתרגול אישי במחשב שלכם עם שורת הפקודה שלכם. הלמידה הטובה ביותר מגיעה דרך האצבעות, אז כתבו אותן בעצמכם, גם אם אתם לא זוכרים איך מי מו ומה, חזרו, תחפשו, תתנסו, ומקסימום תסתכלו בתשובות. אך תכתבו אותן בעצמכם ואל תתפתו להשתמש ב copy-paste, אחרי כתיבת הפקודה פעם, פעמיים, שלוש זה יגיע.

<span style="text-decoration: underline;"><strong>שאלות</strong></span>

  1. נוסף קובץ חדש לאתר, כתבו פקודה שתראה לכם את כל השינויים שהיו מאז ה commit האחרון.
  2. ישנו קובץ חדש בשם contactPage.html, הוסיפו אותו לאזור ההיערכות .
  3. חבר שלכם לצוות עצר ליד העמדה שלכם ומעוניין לראות את הדף החדש, הראו לו.
  4. חכו! חבר שלכם לצוות מעדכן אתכם שהלקוח בסוף אינו מעוניין בדף הזה, הורידו אותו אותו מאזור ההיערכות.
  5. ביצענו שינויים בדף הראשי, index.html, מכיוון שהמערכת כבר עוקבת אחרי הקובץ הזה, פשוט הוסיפו אותו שוב לאזור ההיערכות ובצעו לו commit (בפקודה אחת).
  6. אופס! שכחנו להוסיף עוד דף בשם map.html שה index מקשר אליו, והאמת שהוא צריך להיות באותו ה commit ביחד עם ה index.html. תקנו זאת (הדף חדש, המערכת אינה עוקבת אחריו).
  7. חכו רגע! החלק של ה map.html התבטל, החזירו אותו לאזור ההיערכות.
  8. עזבו, כל הפרויקט התבטל, בטלו את השינויים ב index.html ואת map.html.
  9. בכל זאת, משהו נשאר מהפרויקט, חבר שלכם לצוות שלח לכם את הכתובת של ה repo המרוחק (remote) והוא: git@example.com:example.git. הוסיפו את הכתובת ככתובת של ה origin במאגר.
 10. סיימתם להיום, נשאר רק לדחוף את הקוד ל remote repo (השתמשו ב u- בפקודה כדי שלא תצטרכו לכתוב את הכל שוב בפעם הבאה)..

<span style="text-decoration: underline;"><strong>תשובות</strong></span>

  1. הפקודה: '<span style="color: #ff0000;">git diff</span>'.
  2. הפקודה: '<span style="color: #ff0000;">git add contactPage.html</span>'.
  3. הפקודה: '<span style="color: #ff0000;">git diff &#8211;staged</span>'.
  4. הפקודה: '<span style="color: #ff0000;">git reset HEAD contactPage.html</span>'.
  5. הפקודה: '<span style="color: #ff0000;">"git commit -a -m "Modify index.html</span>'.
  6. מכיוון שמהערכת אינה עוקבת אחרי הדף יש צורך קודם כל להוסיפו לאזור ההיערכות עם הפקודה: '<span style="color: #ff0000;">git add map.html</span>'. ונוסיף את הדף ל commit הקודם עם הפקודה: '<span style="color: #ff0000;">"git commit &#8211;amend -m "Modify index.html & add map.html</span>'.
  7. הפקודה: '<span style="color: #ff0000;">^git reset &#8211;soft HEAD</span>'.
  8. הפקודה: '<span style="color: #ff0000;">git checkout &#8212; index.html map.html</span>'.
  9. הפקודה: '<span style="color: #ff0000;">git remote add origin git@example.com:example.git</span>'.
 10. הפקודה: '<span style="color: #ff0000;">git push -u origin master</span>'.

&nbsp;

## <span style="text-decoration: underline;"><strong>סיכום ביניים</strong></span>

אז עד כה למדנו את כיצד לראות שינויים שהתבצעו בקוד של הפרויקט ואפילו בקוד בקובץ ספציפי (אם אלה קבצים שהוספנו או עדיין לא הוספנו לאזור ההיערכות), וכמו כן ראינו מה ניתן לעשות במצב שבו התחרטנו (אם זה על קוד שהעלינו לאזור ההיערכות או קוד שכבר עשינו לו commit, אם זה קוד שאנחנו רוצים להחזיר לאזור ההיערכות (מ commit), קוד שאנחנו רוצים לבטל כליל (לבטל קוד שהוספנו מאזור ההיערכות או קוד שכבר ביצענו לו commit ואנחנו רוצים לחזור commit אחד (או כמה) לפניו), או להוסיף קובץ ולתקן את התיאור של ה commit האחרון שביצענו). ולבסוף צעדנו קצת לתוך העולם של GitHub (כיצד ליצור repo מרוחק, כיצד להגיד את הנתיב כדי לדחוף את ה repo שלנו ל repo המרוחק, וכיצד לדחוף את הקוד ב repo המקומי שלנו ל repo המרוחק.

עכשיו, הייתי ממליץ לקחת הפסקה קטנה לתרגול הפקודות החדשות, לראות שהכל יושב טוב, אם ישנו משהו שעדיין אינכם מרגישים איתו בנוח, חזרו לקרוא את הפסקה עליו, תשאלו בתגובות, ותנסו לחפש עוד מידע בגוגל (השתדלו לא להמשיך הלאה אם משהו אינו יושב טוב).

&nbsp;

## <span style="text-decoration: underline;"><strong>שיתוף פעולה</strong></span>

[<img class="alignleft size-full wp-image-1761" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/URL.png" alt="URL" width="180" height="90" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/URL.png)שיתוף פעולה בפרויקטים בין אנשים הוא דבר חשוב, הוא קורה כל הזמן, אם זה כצוות שעובד על אותו הפרויקט, ואם זה כפרויקט קוד פתוח שאנשים שונים תורמים חלקים שונים, מתקנים באגים וכד'. אז בואו נניח שבוב שעובד ביחד עם אליס בצוות, רוצה עותק של ה repo על מנת להתחיל לעבוד על פיצ'ר חדש בפרויקט. כיצד הוא יכול להשיג עותק כזה? פשוט לבצע שיבוט (clone) של ה repo. אם אתם משתמשים ב GitHub לדוגמה, גשו לעמוד של הפרויקט, ובחרו code, למטה קצת מעל ה "Download ZIP" יש קוביית טקסט שהכותרת שלה היא "HTTPS clone URL" (ניתן לראות דוגמה בתמונה משמאל). על מנת לשבט את ה repo אנחנו צריכים את הכתובת שלה, וזה מה שהשגנו כעת. בשביל לשבט נכתוב '<span style="color: #ff0000;"><git clone <URL</span>' (את ה URL ביחד עם הסוגרים המשולשים החליפו בכתובת של repo שהעתקתם).

הפקודה תיצור repo (מאגר) מקומי, אצלכם במחשב, בשם ה repo ממנו שיבטתם את הפרויקט (אם ברצונכם לשנות את השם של ה repo אתם יכולים להשתמש בפקודה '<span style="color: #ff0000;">git clone <URL> newName</span>', בעצם פשוט עשו רווח אחרי ה url של ה repo אותו אתם משבטים וכתבו את השם שברצונכם לתת ל repo המשובט והמקומי שלכם).

ברגע שעשינו שיבוט (clone) ל repo. המערכת (git) עושה 3 דברים: הראשון &#8211; מורידה את כל ה repo לתיקייה במחשב שלכם (בשם ה repo ממנו שיבטתם או בשם שנתתם). השני &#8211; מוסיפה לפרויקט המקומי ששיבטנו, remote חדש בשם origin, שמצביע ל URL ממנו שיבטנו (זוכרים כיצד ניתן לבדוק את זה? ע"י הפקודה '<span style="color: #ff0000;">git remote -v</span>'). והשלישי &#8211; המערכת תגדיר את הענף הראשי (כנראה יהיה master) ותכוון את ה HEAD שלנו להיות ב commit האחרון.

&nbsp;

## <span style="text-decoration: underline;"><strong><img class="alignleft wp-image-1762" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/newBranch.png" alt="New Branch" width="85" height="196" />ענפים ומיזוגם</strong></span>

כעת, בוב מוכן לעבוד על הפיצ'ר החדש בפרויקט. כדי לעשות את זה, כדאי מאוד ליצור ענף (branch) חדש ולא לעבוד על אותו ענף שבו הפרויקט הראשי נמצא. יצירת ענף חדש (או אם תרצו ציר זמן חדש, שיוצא / מתפצל מהענף / ציר הזמן הנוכחי) (נקרא לו cat) מתבצעת ע"י הפקודה '<span style="color: #ff0000;"><git branch <nameOfBranch</span>' (ניסיתי לצייר בתמונה משמאל כיצד תראה יצירת הענף החדש (של בוב [: ), לאחר ה commit האחרון). אך אם נבדוק על איזה ענף אנחנו (עם הפקודה '<span style="color: #ff0000;">git branch</span>'), נראה שאנחנו (ה HEAD) עדיין בענף master. אז כדי לעבור לענף של ה cat נכתוב את הפקודה '<span style="color: #ff0000;">git checkout cat</span>'. כעת, אנחנו בעצם בציר זמן אחר, נוכל לעשות עם הפרויקט מה שאנחנו רוצים והשינויים ישמרו רק בענף cat. נוכל בכל רגע לעבור חזרה לענף(/ציר הזמן) של ה master ולראות את הפרויקט מזווית אחרת (ללא השינויים שעשינו, בנוסף, אם חברי הצוות עשו שינויים ובצעו commit לענף master, נוכל לסנכרן את הפרויקט (ע"י הפקודה '<span style="color: #ff0000;">git pull</span>') ולראות את השינויים שלהם.

<pre class="lang:ps decode:true">$ git branch cat</pre>

<img class="alignleft wp-image-1763" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/newBranchCommit.png" alt="New Branch Commit" width="110" height="192" />עכשיו כשאנחנו בענף cat, בואו ניצור קובץ txt חדש בשם cat.txt, ונכתוב בתוכו "schrodinger" (הרי החתול הזה צריך להיות שייך למישהו [; ), נוסיף אותו לאזור ההיערכות (עם הפקודה '<span style="color: #ff0000;">git add cat.txt</span>'), נבצע לו commit (עם הפקודה '<span style="color: #ff0000;">"git commit -m "Creat quantum cat</span>'). וה commit שביצענו כרגע, יתווסף לענף (/ציר הזמן) של ה cat (כי עליו ביצענו את ה commit).

עכשיו אם נכתוב בשורת הפקודה '<span style="color: #ff0000;">ls</span>' כדי לראות את הקבצים המופיעים בתיקייה שלנו, נראה את cat.txt, אך אם נעבור לענף הראשי (עם הפקודה: '<span style="color: #ff0000;">git checkout master</span>', ונכתוב שוב '<span style="color: #ff0000;">ls</span>' לא נראה את הקובץ cat.txt, הוא פשוט לא קיים בענף / ציר הזמן הזה. גם אם נכתוב את הפקודה '<span style="color: #ff0000;">git log</span>' לא נראה את ה commit שבוצע ל cat.txt. רק כדי לבדוק שאנחנו לא משוגעים, נחזור לענף cat (בעזרת הפקודה '<span style="color: #ff0000;">git checkout cat</span>', נכתוב '<span style="color: #ff0000;">ls</span>' ונראה את הקובץ cat.txt, גם אם נכתוב '<span style="color: #ff0000;">git log</span>' נראה את התיעוד של ה commit שביצענו.

&nbsp;

&nbsp;

[<img class="alignleft wp-image-1765" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/merge.png" alt="merge" width="140" height="179" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/merge.png)בואו נניח שסיימנו לעשות את כל השינויים שרצינו בענף cat, ואנחנו רוצים לשלב את השינויים בפרויקט שבענף הראשי, master. אז נחזור לענף master עם הפקודה '<span style="color: #ff0000;">git checkout master</span>' ועכשיו כשה HEAD שלנו בענף master, נשלב לתוכו את הענף cat עם הפקודה '<span style="color: #ff0000;">git merge cat</span>', ניתן לראות בתמונה משמאל הדגמה לאיך שיראו הענפים לאחר הרצת הפקודה. בנוסף, בפלט שנקבל יופיע המילים "Fast-forward", מה זה בעצם אומר?

כשאנו מפצלים ענף חדש, עושים בו כמה שינויים ובענף השני לא (כמו בדוגמה כאן, ב master לא ביצענו שינויים כלל, אך ב cat ביצענו commit אחד) זה קל מאוד ל git לשלב בין הענפים, כי בינתיים לא בוצע כלום בענף master (בהמשך נראה דוגמאות אחרות ונרחיב את הדיבור בנושא).

<pre class="lang:ps decode:true">$ git merge cat
Updating 1191ceb..ab48a3f
Fast-forward
 cat.txt |    1 +
 1 file changed, 1 insertion(+)
 create mode 100644 cat.txt</pre>

[<img class="alignleft wp-image-1766" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/checkoutDog.png" alt="Checkout Dog" width="110" height="161" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/checkoutDog.png)כשסיימנו עם הענף (במקרה שלנו cat) אנחנו יכולים פשוט למחוק אותו עם הפקודה '<span style="color: #ff0000;">git branch -d cat</span>'. עכשיו בואו ניצור ענף (branch) חדש כדי לעבוד על פיצר שונה, נקרא לו dog, הפעם נשתמש בקיצור דרך הקיים כדי ליצור branch חדש ולעבור אליו ישר בפקודה אחת (במקום הפקודה '<span style="color: #ff0000;">git branch dog</span>', ופקודה כדי לעבור אליו '<span style="color: #ff0000;">git checkout dog</span>'), נכתוב את הפקודה '<span style="color: #ff0000;">git checkout -b dog</span>'. נוסיף קובץ חדש בשם labrador.html (עם הפקודה '<span style="color: #ff0000;">git add dog/labrador.html</span>', הנחנו שהוא בתיקייה dog בשביל דוגמה קצת יותר מורכבת) ונבצע לו commit. לאחר מכן נוסיף עוד קובץ חדש בשם germanShepherd.html (בעזרת הפקודה '<span style="color: #ff0000;">git add dog/germanShepherd.html</span>') וגם לו נבצע commit. שימו לב בתמונה משמאל כיצד נראה ציר הזמן עכשיו (ה HEAD זז איתנו כל פעם שאנו מבצעים commit).

<pre class="lang:ps decode:true">$ git checkout -b dog
Switched to a new branch 'dog'
...
$ git add dog/labrador.html
$ git commit -m 'Add Labrador'
...
$ git add dog/germanShepherd.html
$ git commit -m 'Add German Shepherd'</pre>

אך באמצע שבוב עובד עם הענף dog, הוא מקבל sms מהבוס שיש באגים ב master, הם לא סובלים דיחוי וחייבים לתקן אותם במהרה. אז הוא עובר ל master (עם הפקודה '<span style="color: #ff0000;">git checkout master</span>') (ניתן להריץ אח"כ '<span style="color: #ff0000;">git branch</span>' בשביל לוודא כי אכן עברנו ל master) לאחר מכן, בוב מושך מה remote repo (המאגר המרוחק) את המידע כדי לוודא שיש לו את הפרויקט העדכני (מי זוכר מתי פעם אחרונה הוא התעסק איתו ואם מישהו בצוות עשה שינויים מאז, עדייף להיות בטוחים מאשר להצטער) עם הפקודה '<span style="color: #ff0000;">git pull</span>'. שימו לב שכרגע החץ עם ה HEAD אמור להיות ב commit העדכני ביותר ב master, שלפי התמונה למעלה אמור להיות ה commit השני, ממש לפני הפיצול של dog.

&nbsp;

בוב מתקן את מה שצריך לתקן, בוא נאמר main.js, ומבצע לו commit עם הפקודה '<span style="color: #ff0000;">"git commit -m "Fix main.js</span>' ודוחף את השינוי ל master ב remote (לענף master במאגר המרוחק) עם הפקודה '<span style="color: #ff0000;">git push</span>' (נניח וכבר ביצענו פעם commit עם u- כדי לשמור את הניתוב וכ'ו).

<pre class="lang:default decode:true">$ git checkout master
  Switched to branch 'master'
$ git branch
  admin
* master
$ git pull
...
$ git add main.js
$ git commit -m 'Fix man.js'
...
$ git push</pre>

[<img class="alignleft wp-image-1767" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/fixMainJS.png" alt="Fix MainJS" width="100" height="162" />](http://www.lifelongstudent.net/wp-content/uploads/2014/07/fixMainJS.png)עכשיו כשסיימנו לטפל במקרה החירום, הגיע הזמן לחזור לפרויקט שלנו בענף dog עם הפקודה '<span style="color: #ff0000;">git checkout dog</span>', מסיימים את העבודה, ועוברים חזרה ל master (עם הפקודה '<span style="color: #ff0000;">git checkout master</span>') כדי למזג את הפרויקט בעזרת הפקודה '<span style="color: #ff0000;">git merge dog</span>'. והפעם, בניגוד למיזוג עם cat, ביצענו שינויים ב master אחרי יצירת הענף החדש, dog, אז כשנמזג בין הענפים יפתח לנו עורך הנקרא VI (אם מוגדר עורך אחר כברירת מחדל הוא יפתח במקומו). העורך נראה כמו בתמונה למטה. בפתיחת העורך git אומרת לנו או קיי, עשיתי את ה commit הזה בשבילך כי אני רואה שאתה מנסה למזג בין 2 הענפים האלו, אך אם אתה צריך להיות ספציפי יותר, בבקשה תוסיף את זה להודעה שלמעלה (ניתן לראות שכתוב בה 'Merge branch 'dog). ניתן לערוך את ההודעה הזאת, וכשסיימנו נכתוב '<span style="color: #ff0000;">wq:</span>' (ה w מסמלת write וה q מסמלת quit) כדי לחזור חזרה לשורת הפקודה.

](http://www.lifelongstudent.net/wp-content/uploads/2014/07/Vi.png)

&nbsp;

&nbsp;

<img class="alignleft wp-image-1771" src="http://www.lifelongstudent.net/wp-content/uploads/2014/07/recursiveMerge.png" alt="Recursive Merge" width="100" height="191" />

&nbsp;

&nbsp;

&nbsp;

&nbsp;

&nbsp;

&nbsp;

מכיוון שמיזגנו שני ענפים עם שינויים בכל אחד מהם גיט מבצעת "מיזוג רקורסיבי" וכשזה קורה, גיט יוצרת commit בדיוק היכן שהענפים מתמזגים חזרה, לאחר מכן אם נכתוב '<span style="color: #ff0000;">git log</span>' נוכל לראות את ה commit שנוצר ע"י המערכת (git).

<pre class="lang:ps decode:true">Merge made be 'recursive' strategy.
 0 files changed
 create mode 100644 dog/labrador.html
 create mode 100644 dig/germanShepherd.html

$ git log
commit 19f735c3556129279bb10a1447dc5aba1q1fa9
Merge: 5c9ed90 7980856
Aurthor: nirgn965 &lt;nirgn975@gmail.com&gt;
Date:   Thu May 12:17:51:53 2014 -0200

    Merge branch 'dog'</pre>

&nbsp;

## **<span style="text-decoration: underline;">שאלות ותשובות</span>**

הגענו לחלק השני של השאלות והתשובות.

<span style="text-decoration: underline;"><strong>שאלות</strong></span>

  1. מחלקת ה IT ביצעה עדכונים למערכת ההפעלה בעמדה שלכם ומחקה את ההארד דיסק תוך כדי העדכון. שבטו (העתיקו) את ה repo של הפרויקט (נקרא לו blabla) מהכתובת https://github.com/nirgn975/blabla.git.
  2. על הדרך, תבדקו את רשימת ה remote שה repo שלנו מכיר.
  3. אנחנו צריכים להוסיף פיצ'ר חדש לפרויקט, יש לבנות אותו לפני על ענף נפרד, צרו ענף חדש בשם newBla.
  4. החליפו ענף לענף שזה עתה יצרנו.
  5. סיימנו לבצע את כל העבודה על הענף newBla, כעת אנחנו מוכנים למזג בין הענף הנל לראשי (master), בצעו זאת.
  6. כעת, צרו עוד ענף (בשביל פיצ'ר אחר וחדש) ועברו לאותו הענף (נקרא לו fin) בפקודה אחת בלבד.

<span style="text-decoration: underline;"><strong>תשובות</strong></span>

  1. הפקודה: '<span style="color: #ff0000;">git clone https://github.com/nirgn975/blabla.git</span>'.
  2. הפקודה: '<span style="color: #ff0000;">git remote -v</span>'.
  3. הפקודה: '<span style="color: #ff0000;">git branch newBla</span>'.
  4. הפקודה: '<span style="color: #ff0000;">git checkout newBla</span>'.
  5. ראשית נחזור לענף master עם הפקודה: '<span style="color: #ff0000;">git checkout master</span>', ולאחר מכן נמזג עם הפקודה '<span style="color: #ff0000;">git marge newBla</span>'.
  6. הפקודה: '<span style="color: #ff0000;">git checkout -b fin</span>'.

&nbsp;

## <span style="text-decoration: underline;"><strong>סיכום</strong></span>

אז למדנו כיצד לראות את השינויים שביצענו בקוד, איך לחזור אחורה אם התחרטנו ואנו רוצים לבטל את השינויים (אם זה אחרי שהעלינו אותם לאזור ההיערכות, או אפילו אחרי שביצענו commit, במידה וביצענו כבר commit ניתן להחזיר את השינויים לאזור ההיערכות או לבטלם לגמרי), העלינו את הפרויקט ל repo מרוחק (במקרה הזה הדגמנו על GitHub), שיתפנו פעולה עם עוד אנשים בצוות, ויצרנו ענפים חדשים (על מנת לעבוד על פיצרים חדשים) ובסוף (כשסיימנו את הפיצ'ר) מיזגנו אותו עם הענף הראשי (master) (עברנו על מיזוגים כשב master לא בוצע שינויים כלל, וגם כשבוצעו שינויים ב master). מקווה שהכל מובן ואם לא, אשמח לעזור בתגובות.
