---
import Layout from "../layouts/Layout.astro";
import workData from "../../public/work-data.json";
import talksData from "../../public/talks-data.json";
import skillsData from "../../public/skills-data.json";
import educationData from "../../public/education-data.json";

let repos: Array<{ code: string; title: string; name?: string; description?: string; url?: string; stars?: string; forks?: string }> = [
  { code: "generator-jekyll-starter-kit", title: "Jekyll Starter Kit Generator" },
  { code: "stories-of-a-lifelong-student", title: "Stories Of A Lifelong Student" },
  { code: "devRes", title: "Developer Resume" },
  { code: "challenges", title: "Random Challenges Solutions" },
  { code: "angular-sanic-seed-project", title: "Angular Sanic Seed Project" },
  { code: "awesome-cyber-awesome", title: "Awesome Cyber Awesome" },
  { code: "google-keep-api", title: "Google Keep API" },
  { code: "elmctron", title: "Elmctron" },
];

for await (const [index, repo] of repos.entries()) {
  const response = await fetch(`https://api.github.com/repos/nirgn975/${repo.code}`);
  const data = await response.json();
  repos[index] = { ...repo, name: data.name, description: data.description, url: data.html_url, stars: data.stargazers_count, forks: data.forks };
}

repos = repos.sort((a, b) => Number(b.stars) - Number(a.stars));
---

<Layout title="Homepage">
  <section class="divide-y divide-zinc-300 dark:divide-zinc-700">
    <!-- About Me -->
    <div class="py-6">
      <div class="flex items-center my-2">
        <i class="fa-solid fa-user h-8 w-8"></i>
        <h2 class="ml-2 font-medium text-3xl">About Me</h2>
      </div>
      <p class="mb-4">I'm a dedicated, quality-focused professional with a strong sense of responsibility, team spirit and good human skills.</p>
      <ul class="list-disc pl-6">
        <li>Active in the open source community.</li>
        <li>Broad system view with the ability to drill down to the fine details.</li>
        <li>Fast learning curve, adapting and embracing new technologies.</li>
      </ul>
    </div>

    <!-- Work -->
    <div class="py-6">
      <div class="flex items-center my-2">
        <i class="fas fa-briefcase h-8 w-8"></i>
        <h2 class="ml-2 font-medium text-3xl">Work</h2>
      </div>

      <div class="pt-4 pl-6">
        {
          workData.map((work) => (
            <div class="pt-4 pb-8 px-6 border-l-2 border-zinc-700 dark:border-zinc-400">
              <time class="relative before:h-5 before:w-5 before:absolute before:rounded-full before:border-2 before:border-zinc-700 dark:before:border-zinc-400 before:bg-zinc-50 dark:before:bg-zinc-800 before:-left-9 before:content-['']">
                {work.startDate} - {work.endDate}
              </time>
              <h3 class="text-xl mt-2 mb-4">
                {work.title} @
                <a href={work.company.url} target="_blank" class="text-sky-500 hover:text-sky-400">
                  {work.company.name}
                </a>
              </h3>
              <p>{work.body}</p>
              <ul class="list-disc pl-6">
                {work.items.map((item) => (
                  <li set:html={item} />
                ))}
              </ul>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Education -->
    <div class="py-6">
      <div class="flex items-center my-2">
        <i class="fas fa-graduation-cap h-8 w-8"></i>
        <h2 class="ml-2 font-medium text-3xl">Education</h2>
      </div>

      <div class="pt-4 pl-6">
        <div class="pt-4 pb-8 px-6 border-l-2 border-zinc-700 dark:border-zinc-400">
          <time
            class="relative before:h-5 before:w-5 before:absolute before:rounded-full before:border-2 before:border-zinc-700 dark:before:border-zinc-400 before:bg-zinc-50 dark:before:bg-zinc-800 before:-left-9 before:content-['']"
          >
            always - always
          </time>
          <h3 class="text-xl mt-2 mb-4">
            Self Learning @
            <a href="https://nir.galons.io" target="_blank" class="text-sky-500 hover:text-sky-400">Self Learning</a>
          </h3>
          <p>
            I'm very passionate about computers and technology, I always strive to learn more and keep myself up to date.<br />Here are some of the platforms I
            use do achive that goal:<br /><br />
            <a href="http://teamtreehouse.com/nirgalon" target="_blank" class="text-sky-500 hover:text-sky-400">Treehouse Profile</a> |
            <a href="https://www.codecademy.com/profiles/teraAce56031" target="_blank" class="text-sky-500 hover:text-sky-400">Codecademy Profile</a>
            <br />
          </p>
          <div class="flex justify-around items-center mt-4">
            <a href="https://www.codewars.com/users/nirgn" target="_blank">
              <img src="https://www.codewars.com/users/nirgn/badges/small" alt="codewars badge" />
            </a>
            <a href="https://stackexchange.com/users/2325549" target="_blank">
              <img src="https://stackexchange.com/users/flair/2325549.png" width="208" height="58" alt="stack exchange badge" />
            </a>
            <a href="https://tryhackme.com/p/nirgn975" target="_blank">
              <img src="https://tryhackme-badges.s3.amazonaws.com/nirgn975.png" alt="TryHackMe" />
            </a>
          </div>
        </div>

        {
          educationData.map((education) => (
            <div class="pt-4 pb-8 px-6 border-l-2 border-zinc-700 dark:border-zinc-400">
              <time class="relative before:h-5 before:w-5 before:absolute before:rounded-full before:border-2 before:border-zinc-700 dark:before:border-zinc-400 before:bg-zinc-50 dark:before:bg-zinc-800 before:-left-9 before:content-['']">
                {education.startDate} - {education.endDate}
              </time>
              <h3 class="text-xl mt-2 mb-4">
                {education.title} @
                <a href={education.school.url} target="_blank" class="text-sky-500 hover:text-sky-400">
                  {education.school.name}
                </a>
              </h3>
              <p>{education.body}</p>
              <ul class="list-disc pl-6">
                {education.items.map((item) => (
                  <li set:html={item} />
                ))}
              </ul>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Skills -->
    <div class="py-6">
      <div class="flex items-center my-2">
        <i class="fal fa-code h-8 w-8"></i>
        <h2 class="ml-2 font-medium text-3xl">Skills</h2>
      </div>

      {
        skillsData.map((skill) => (
          <div class="mt-6">
            <h3 class="text-xl my-2">{skill.category}</h3>
            <div class="ml-4">
              {skill.items.map((item) => (
                <span class="ml-4 inline-block">
                  <i class={`${item.code} h-5 w-5 mr-1`} />
                  {item.name}
                </span>
              ))}
            </div>
          </div>
        ))
      }
    </div>

    <!-- Projects -->
    <div class="py-6">
      <div class="flex items-center my-2">
        <i class="fal fa-code-branch h-8 w-8"></i>
        <h2 class="ml-2 font-medium text-3xl">Some of my Projects</h2>
      </div>

      <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        {
          repos.map((repo) => (
            <div class="flex flex-col bg-zinc-200 dark:bg-zinc-700 rounded-md">
              <a href={repo.url} target="_blank" class="p-4">
                <h3 class="text-lg font-medium">{repo.name}</h3>
              </a>

              <a href={repo.url} target="_blank">
                <img src={`/about/projects/${repo.code}.webp`} class="w-full" />
              </a>

              <p class="p-4 flex-1">{repo.description}</p>

              <div class="flex justify-between p-4 border-t border-zinc-700 dark:border-zinc-400">
                <span>
                  <i class="fas fa-star" />
                  {repo.stars}
                </span>
                <span>
                  <i class="fal fa-code-merge" />
                  {repo.forks}
                </span>
              </div>
            </div>
          ))
        }
      </div>
    </div>

    <!-- Talks -->
    <div class="py-6">
      <div class="flex items-center my-2">
        <i class="fa-light fa-presentation-screen h-8 w-8"></i>
        <h2 class="ml-2 font-medium text-3xl">Talks</h2>
      </div>

      <div class="mt-4">
        {
          talksData.map((talk) => (
            <div class="flex flex-col md:flex-row">
              <img src={talk.image} alt="Talk Thumbnail" class="my-2" />
              <div class="p-4">
                <h3 class="text-2xl">{talk.title}</h3>
                <p class="pt-2">
                  <time>{talk.date}</time> |
                  <span>
                    <a href={talk.meetupUrl} target="_blank" rel="noreferrer" class="text-sky-500 hover:text-sky-400">
                      Meetpup Page
                    </a>{" "}
                    |
                  </span>
                  <span>
                    <a href={talk.downloadUrl} target="_blank" rel="noreferrer" class="text-sky-500 hover:text-sky-400">
                      Download
                    </a>
                  </span>
                </p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>
</Layout>
